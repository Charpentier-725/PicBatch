# Version 1.1 功能测试清单

## 🎯 测试环境
- **开发服务器**: http://localhost:5177
- **生产构建**: `npm run build && npm run preview`
- **浏览器要求**: Chrome/Edge/Safari/Firefox 最新版本

---

## ✅ 测试项目

### 1. 批量裁剪功能 (Crop Panel)

**位置**: 设置面板 → 裁剪 Tab

#### 测试步骤:
1. [ ] 上传 3-5 张不同尺寸的图片(横向、纵向、正方形)
2. [ ] 启用"批量裁剪"开关
3. [ ] 测试预设比例:
   - [ ] 1:1 (正方形) - 验证裁剪后图片为正方形
   - [ ] 16:9 (宽屏) - 验证宽高比正确
   - [ ] 4:3 (标准) - 验证宽高比正确
   - [ ] 3:2 (经典) - 验证宽高比正确
4. [ ] 测试自定义比例:
   - [ ] 选择"自定义"
   - [ ] 输入宽度: 21, 高度: 9 (21:9 超宽屏)
   - [ ] 验证裁剪结果
5. [ ] 测试裁剪位置:
   - [ ] 居中 (默认)
   - [ ] 左上
   - [ ] 右上
   - [ ] 左下
   - [ ] 右下
6. [ ] 处理图片并下载
7. [ ] 验证裁剪结果是否符合预期

**预期结果**:
- 所有图片按指定比例裁剪
- 裁剪位置准确
- 图片质量无损失
- 处理速度 < 2秒/张

---

### 2. 批量重命名功能 (Rename Panel)

**位置**: 设置面板 → 重命名 Tab

#### 测试步骤:
1. [ ] 上传 3 张测试图片
2. [ ] 启用"批量重命名"开关
3. [ ] 测试前缀:
   - [ ] 输入前缀: "产品照片"
   - [ ] 查看实时预览是否更新
4. [ ] 测试保留原名:
   - [ ] 启用"保留原文件名"
   - [ ] 验证预览包含原文件名
   - [ ] 关闭"保留原文件名"
   - [ ] 验证预览不包含原文件名
5. [ ] 测试序列号:
   - [ ] 启用"添加序列号"
   - [ ] 设置起始数字: 10
   - [ ] 测试不同位数:
     - [ ] 1位: 10, 11, 12
     - [ ] 2位: 10, 11, 12
     - [ ] 3位: 010, 011, 012
6. [ ] 测试后缀:
   - [ ] 输入后缀: "2025"
   - [ ] 验证预览更新
7. [ ] 测试组合场景:
   - [ ] 前缀="店铺", 保留原名=否, 序列=启用(001), 后缀="秋季"
   - [ ] 预期: `店铺_001_秋季.jpg`, `店铺_002_秋季.jpg`, `店铺_003_秋季.jpg`
8. [ ] 处理并下载
9. [ ] 打开 ZIP 文件验证文件名

**预期结果**:
- 实时预览准确显示 3 个示例文件名
- 下载的文件名与预览一致
- 支持中文前缀/后缀
- 序列号补零正确

---

### 3. 智能压缩功能 (Smart Compress)

**位置**: 设置面板 → 基础 Tab

#### 测试步骤:
1. [ ] 准备测试图片:
   - [ ] 照片: 高分辨率风景照 (>1024x768)
   - [ ] 图标: 小尺寸 PNG (<512x512)
   - [ ] 透明图: 带 Alpha 通道的 PNG
   - [ ] 图形: 插画/矢量图导出的位图

2. [ ] 测试自动类型识别:
   - [ ] 上传照片 → 选择"按质量"模式 → 质量 80%
   - [ ] 验证压缩后文件大小合理(JPEG格式)

   - [ ] 上传图标 → 选择"按质量"模式 → 质量 90%
   - [ ] 验证保持 PNG 格式,边缘清晰

   - [ ] 上传透明图 → 选择"按质量"模式 → 质量 85%
   - [ ] 验证透明度保留

   - [ ] 上传图形/插画 → 选择"按质量"模式 → 质量 90%
   - [ ] 验证平面颜色和边缘质量

3. [ ] 测试按大小压缩:
   - [ ] 上传 2MB 的图片
   - [ ] 选择"按大小"模式
   - [ ] 目标大小: 500KB
   - [ ] 处理并验证输出文件 ≈500KB (允许 ±5% 误差)

**预期结果**:
- 不同类型图片采用不同压缩策略
- 按大小压缩精确达到目标(误差 <5%)
- 迭代压缩在 8 次内完成
- 处理时间 < 2秒/张

---

### 4. 历史记录功能 (History)

**位置**: 页面顶部 → "历史记录"按钮

#### 测试步骤:
1. [ ] 执行第一次批处理:
   - [ ] 格式: WebP
   - [ ] 压缩模式: 质量 85%
   - [ ] 裁剪: 16:9
   - [ ] 重命名: 前缀="测试"
   - [ ] 处理 3 张图片

2. [ ] 点击"历史记录"按钮
3. [ ] 验证记录显示:
   - [ ] 显示处理时间(相对时间,如"刚刚")
   - [ ] 显示文件数量: 3
   - [ ] 显示参数徽章: WebP, 质量 85%, 裁剪 16:9
   - [ ] 显示压缩比例
   - [ ] 显示处理耗时

4. [ ] 执行第二次批处理(不同参数):
   - [ ] 格式: PNG
   - [ ] 压缩模式: 按大小 200KB
   - [ ] 裁剪: 1:1
   - [ ] 重命名: 序列号 001
   - [ ] 处理 2 张图片

5. [ ] 再次打开历史记录
6. [ ] 验证显示 2 条记录(最新在前)

7. [ ] 测试恢复功能:
   - [ ] 点击第一条记录的"恢复"按钮
   - [ ] 验证设置面板所有参数恢复为第一次的设置
   - [ ] 检查: 格式=WebP, 质量=85%, 裁剪=16:9, 重命名前缀="测试"

8. [ ] 测试删除功能:
   - [ ] 点击某条记录的"删除"按钮
   - [ ] 验证记录被删除

9. [ ] 测试记录上限:
   - [ ] 执行 50+ 次批处理(可以用脚本模拟)
   - [ ] 验证只保留最近 50 条记录

**预期结果**:
- 自动保存每次处理的完整参数
- 时间显示友好(刚刚、5分钟前、今天 12:00)
- 一键恢复所有设置准确无误
- 删除功能正常
- 自动清理旧记录(保留 50 条)
- 数据存储在 IndexedDB(浏览器本地)

---

### 5. UI/UX 测试

#### Tabs 导航:
1. [ ] 点击"基础"Tab - 显示格式和压缩设置
2. [ ] 点击"裁剪"Tab - 显示裁剪设置
3. [ ] 点击"重命名"Tab - 显示重命名设置
4. [ ] Tabs 切换流畅,无卡顿
5. [ ] 当前 Tab 高亮显示明确

#### 响应式设计:
1. [ ] 缩小浏览器窗口至手机宽度(<768px)
2. [ ] 验证 Tabs 布局适配
3. [ ] 验证所有输入框和按钮可点击
4. [ ] 验证预览区域正常显示

#### 主题切换:
1. [ ] 点击主题切换按钮
2. [ ] 验证亮色/暗色主题切换正常
3. [ ] 验证所有新组件(Tabs, Switch, Dialog)主题适配

---

### 6. 综合场景测试

#### 场景 1: 电商产品照片批处理
1. [ ] 上传 10 张产品照片
2. [ ] 设置:
   - [ ] 裁剪: 1:1 (正方形,适合电商平台)
   - [ ] 重命名: 前缀="商品", 序列 001
   - [ ] 格式: WebP
   - [ ] 压缩: 按大小 200KB
3. [ ] 处理并下载
4. [ ] 验证:
   - [ ] 所有图片为正方形
   - [ ] 文件名: 商品_001.webp ~ 商品_010.webp
   - [ ] 每张 ≈200KB
   - [ ] 总处理时间 < 20秒

#### 场景 2: 社交媒体封面图
1. [ ] 上传 5 张横向图片
2. [ ] 设置:
   - [ ] 裁剪: 16:9 (视频封面比例)
   - [ ] 重命名: 前缀="封面", 后缀="2025秋"
   - [ ] 格式: JPEG
   - [ ] 压缩: 质量 90%
3. [ ] 处理并下载
4. [ ] 验证:
   - [ ] 16:9 宽高比
   - [ ] 文件名: 封面_IMG_xxxx_2025秋.jpg
   - [ ] 高质量输出

#### 场景 3: 头像批量生成
1. [ ] 上传 3 张人物照片
2. [ ] 设置:
   - [ ] 裁剪: 1:1, 位置"居中"
   - [ ] 重命名: 前缀="头像", 序列 01 (2位)
   - [ ] 格式: PNG
   - [ ] 压缩: 按大小 100KB
3. [ ] 处理并下载
4. [ ] 验证:
   - [ ] 正方形头像
   - [ ] 文件名: 头像_01.png, 头像_02.png, 头像_03.png
   - [ ] 每张约 100KB

---

## 🐛 已知问题检查

1. [ ] 裁剪后图片是否有黑边或拉伸?
2. [ ] 重命名是否支持特殊字符(中文、空格、符号)?
3. [ ] 历史记录在浏览器刷新后是否保留?
4. [ ] 大批量处理(50+张)是否会卡死?
5. [ ] 不同格式转换后质量是否正常?

---

## 📊 性能基准

**测试配置**: 10 张 3MB 的照片

| 功能组合 | 预期处理时间 | 实际处理时间 | 通过/失败 |
|---------|------------|------------|----------|
| 仅格式转换 | <5秒 | ___ | [ ] |
| 格式转换 + 裁剪 | <8秒 | ___ | [ ] |
| 格式转换 + 重命名 | <6秒 | ___ | [ ] |
| 全功能(转换+裁剪+重命名+压缩) | <15秒 | ___ | [ ] |

---

## ✅ 测试完成标准

- [ ] 所有基础功能测试通过
- [ ] 至少完成 2 个综合场景测试
- [ ] 性能基准达标
- [ ] 无严重 UI/UX 问题
- [ ] 无控制台错误

---

## 📝 Bug 报告模板

如发现问题,请记录:

**问题描述**:
**重现步骤**:
1.
2.
3.

**预期结果**:
**实际结果**:
**截图**: (如有)
**浏览器**:
**控制台错误**: (如有)

---

**测试日期**: ___________
**测试人**: ___________
**版本**: v1.1.0
**测试结果**: 通过 / 失败
