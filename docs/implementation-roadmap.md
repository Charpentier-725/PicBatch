# PicBatch å®ç°è·¯çº¿å›¾ä¸ä»»åŠ¡æ¸…å•

> åŸºäº MVP PRDã€æŠ€æœ¯è®¾è®¡æ–¹æ¡ˆå’Œ 2025 æœ€æ–°æŠ€æœ¯æ ˆçš„å®Œæ•´å®æ–½è®¡åˆ’
> åˆ›å»ºæ—¥æœŸï¼š2025-10-06
> é¡¹ç›®å‘¨æœŸï¼š8-10 å·¥ä½œæ—¥ï¼ˆMVP 1.0ï¼‰

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è§ˆ](#é¡¹ç›®æ¦‚è§ˆ)
- [é˜¶æ®µ 0ï¼šé¡¹ç›®åˆå§‹åŒ–](#é˜¶æ®µ-0é¡¹ç›®åˆå§‹åŒ–)
- [é˜¶æ®µ 1ï¼šåŸºç¡€æ¡†æ¶æ­å»º](#é˜¶æ®µ-1åŸºç¡€æ¡†æ¶æ­å»º)
- [é˜¶æ®µ 2ï¼šæ–‡ä»¶ä¸Šä¼ æ¨¡å—](#é˜¶æ®µ-2æ–‡ä»¶ä¸Šä¼ æ¨¡å—)
- [é˜¶æ®µ 3ï¼šæ ¼å¼è½¬æ¢æ ¸å¿ƒ](#é˜¶æ®µ-3æ ¼å¼è½¬æ¢æ ¸å¿ƒ)
- [é˜¶æ®µ 4ï¼šç”»è´¨å‹ç¼©åŠŸèƒ½](#é˜¶æ®µ-4ç”»è´¨å‹ç¼©åŠŸèƒ½)
- [é˜¶æ®µ 5ï¼šæ‰¹é‡ä¸‹è½½åŠŸèƒ½](#é˜¶æ®µ-5æ‰¹é‡ä¸‹è½½åŠŸèƒ½)
- [é˜¶æ®µ 6ï¼šè¿›åº¦ä¸çŠ¶æ€ç®¡ç†](#é˜¶æ®µ-6è¿›åº¦ä¸çŠ¶æ€ç®¡ç†)
- [é˜¶æ®µ 7ï¼šä¼˜åŒ–ä¸æµ‹è¯•](#é˜¶æ®µ-7ä¼˜åŒ–ä¸æµ‹è¯•)
- [é˜¶æ®µ 8ï¼šéƒ¨ç½²ä¸Šçº¿](#é˜¶æ®µ-8éƒ¨ç½²ä¸Šçº¿)
- [åç»­ç‰ˆæœ¬è§„åˆ’](#åç»­ç‰ˆæœ¬è§„åˆ’)
- [é£é™©æ§åˆ¶](#é£é™©æ§åˆ¶)

---

## é¡¹ç›®æ¦‚è§ˆ

### æ ¸å¿ƒç›®æ ‡

æ„å»ºä¸€ä¸ª**éšç§ä¼˜å…ˆã€å…è´¹å¼€æ”¾ã€æ˜“ç”¨é«˜æ•ˆ**çš„æµè§ˆå™¨ç«¯å›¾ç‰‡æ‰¹é‡å¤„ç†å·¥å…·ã€‚

### å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | éªŒæ”¶æ ‡å‡† |
|------|--------|----------|
| é¦–æ¬¡åŠ è½½æ—¶é—´ | <3MB | æ‰“åŒ…ä½“ç§¯ä¸è¶…è¿‡ 3MB |
| å•å¼ å›¾ç‰‡å¤„ç† | â‰¤2ç§’ | ä¸­ç­‰åˆ†è¾¨ç‡å›¾ç‰‡è½¬æ¢æ—¶é—´ |
| æ‰¹é‡å¤„ç†èƒ½åŠ› | æ”¯æŒ 50 å¼  | ä¸å´©æºƒã€ä¸å¡é¡¿ |
| ç”¨æˆ·ä»»åŠ¡æ—¶é•¿ | â‰¤2 åˆ†é’Ÿ | ä»ä¸Šä¼ åˆ°ä¸‹è½½å®Œæˆ |
| æµè§ˆå™¨å…¼å®¹ | Chrome/Edge/å¾®ä¿¡ | æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸è¿è¡Œ |

### æŠ€æœ¯æ ˆ

```yaml
å‰ç«¯æ¡†æ¶: Vite 7 + React 19 + TypeScript 5.6
UI ç»„ä»¶: shadcn/ui v3.2+
çŠ¶æ€ç®¡ç†: zustand v4.5+
å›¾ç‰‡å¤„ç†: Canvas API + browser-image-compression
æ–‡ä»¶å¤„ç†: jszip + file-saver
éƒ¨ç½²å¹³å°: Vercel
```

### é¡¹ç›®é‡Œç¨‹ç¢‘

```
Day 1: é¡¹ç›®åˆå§‹åŒ– + åŸºç¡€æ¡†æ¶
Day 2: æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å®Œæˆ
Day 4: æ ¼å¼è½¬æ¢åŠŸèƒ½å®Œæˆ
Day 5: å‹ç¼©åŠŸèƒ½å®Œæˆ
Day 6: ä¸‹è½½åŠŸèƒ½å®Œæˆ
Day 7: çŠ¶æ€ç®¡ç†å®Œå–„
Day 8: ä¼˜åŒ–æµ‹è¯•å®Œæˆ
Day 9: éƒ¨ç½²ä¸Šçº¿
Day 10: ç›‘æ§ä¸è¿­ä»£å‡†å¤‡
```

---

## é˜¶æ®µ 0ï¼šé¡¹ç›®åˆå§‹åŒ–

**ç›®æ ‡ï¼š** æ­å»ºå®Œæ•´çš„å¼€å‘ç¯å¢ƒï¼Œé…ç½®å¥½æ‰€æœ‰å·¥å…·é“¾

**å·¥æ—¶ï¼š** 2-3 å°æ—¶

### ä»»åŠ¡æ¸…å•

#### 0.1 åˆ›å»ºé¡¹ç›® [P0]

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
# ä½¿ç”¨ Vite 7 æœ€æ–°æ¨¡æ¿
npm create vite@latest picbatch -- --template react-ts
cd picbatch
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] é¡¹ç›®ç›®å½•åˆ›å»ºæˆåŠŸ
- [x] package.json ç”Ÿæˆ
- [x] å¯ä»¥è¿è¡Œ `npm install`

---

#### 0.2 å‡çº§åˆ° React 19 [P0]

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
npm install react@19 react-dom@19
npm install -D @types/react@19 @types/react-dom@19
```

**æ›´æ–° vite.config.tsï¼š**
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  optimizeDeps: {
    holdUntilCrawlEnd: false, // Vite 7 ä¼˜åŒ–
  },
  server: {
    warmup: {
      clientFiles: ['./src/App.tsx', './src/main.tsx'],
    },
  },
})
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] React 19 å®‰è£…æˆåŠŸ
- [x] å¼€å‘æœåŠ¡å™¨å¯ä»¥å¯åŠ¨
- [x] æ— ç±»å‹é”™è¯¯

---

#### 0.3 é…ç½® Tailwind CSS [P0]

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

**tailwind.config.js é…ç½®ï¼š**
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  darkMode: ['class'],
  content: [
    './index.html',
    './src/**/*.{js,ts,jsx,tsx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

**src/index.cssï¼š**
```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] Tailwind æ ·å¼ç”Ÿæ•ˆ
- [x] æš—è‰²æ¨¡å¼é…ç½®å®Œæˆ

---

#### 0.4 å®‰è£… shadcn/ui [P0]

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
npx shadcn@latest init
```

**é…ç½®é€‰é¡¹ï¼š**
```
âœ” Would you like to use TypeScript? â€¦ yes
âœ” Which style would you like to use? â€º Default
âœ” Which color would you like to use as base color? â€º Slate
âœ” Where is your global CSS file? â€¦ src/index.css
âœ” Would you like to use CSS variables for colors? â€¦ yes
âœ” Where is your tailwind.config.js located? â€¦ tailwind.config.js
âœ” Configure the import alias for components: â€¦ @/components
âœ” Configure the import alias for utils: â€¦ @/lib/utils
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] components.json ç”Ÿæˆ
- [x] lib/utils.ts åˆ›å»ºæˆåŠŸ
- [x] å¯ä»¥æ·»åŠ ç»„ä»¶

---

#### 0.5 å®‰è£…æ ¸å¿ƒä¾èµ– [P0]

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
# ç”Ÿäº§ä¾èµ–
npm install zustand react-dropzone browser-image-compression jszip file-saver heic2any

# å¼€å‘ä¾èµ–
npm install -D @types/file-saver
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰€æœ‰ä¾èµ–å®‰è£…æˆåŠŸ
- [x] package.json ç‰ˆæœ¬æ­£ç¡®
- [x] æ— ä¾èµ–å†²çª

---

#### 0.6 é…ç½® ESLint å’Œ Prettier [P1]

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
npm install -D eslint@9 prettier eslint-plugin-react-hooks eslint-plugin-react-refresh
```

**eslint.config.jsï¼ˆESLint 9 æ‰å¹³åŒ–é…ç½®ï¼‰ï¼š**
```javascript
import js from '@eslint/js'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'

export default tseslint.config(
  { ignores: ['dist'] },
  {
    extends: [js.configs.recommended, ...tseslint.configs.recommended],
    files: ['**/*.{ts,tsx}'],
    languageOptions: {
      ecmaVersion: 2020,
    },
    plugins: {
      'react-hooks': reactHooks,
      'react-refresh': reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      'react-refresh/only-export-components': [
        'warn',
        { allowConstantExport: true },
      ],
    },
  },
)
```

**.prettierrcï¼š**
```json
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] ESLint é…ç½®ç”Ÿæ•ˆ
- [x] Prettier æ ¼å¼åŒ–æ­£å¸¸
- [x] IDE é›†æˆæˆåŠŸ

---

#### 0.7 åˆ›å»ºé¡¹ç›®æ–‡ä»¶ç»“æ„ [P0]

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
mkdir -p src/{components,lib,store,types,hooks,workers}
mkdir -p src/components/ui
```

**æ–‡ä»¶ç»“æ„ï¼š**
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/              # shadcn/ui ç»„ä»¶
â”‚   â”œâ”€â”€ FileUploader.tsx
â”‚   â”œâ”€â”€ FileList.tsx
â”‚   â”œâ”€â”€ FileItem.tsx
â”‚   â”œâ”€â”€ ToolPanel.tsx
â”‚   â”œâ”€â”€ ProgressBar.tsx
â”‚   â””â”€â”€ DownloadButton.tsx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ imageUtils.ts
â”‚   â”œâ”€â”€ compression.ts
â”‚   â”œâ”€â”€ zipUtils.ts
â”‚   â””â”€â”€ fileUtils.ts
â”œâ”€â”€ store/
â”‚   â””â”€â”€ useStore.ts
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useImageProcessor.ts
â”‚   â””â”€â”€ useFileUpload.ts
â”œâ”€â”€ workers/
â”‚   â””â”€â”€ imageProcessor.worker.ts
â”œâ”€â”€ App.tsx
â”œâ”€â”€ main.tsx
â””â”€â”€ index.css
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰€æœ‰ç›®å½•åˆ›å»ºæˆåŠŸ
- [x] æ–‡ä»¶ç»“æ„æ¸…æ™°åˆç†

---

#### 0.8 é…ç½® Git å’Œç‰ˆæœ¬æ§åˆ¶ [P1]

**.gitignoreï¼š**
```
# dependencies
node_modules
.pnp
.pnp.js

# testing
coverage

# production
dist
dist-ssr

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# local env files
.env.local
.env.development.local
.env.test.local
.env.production.local

# IDE
.vscode/*
!.vscode/settings.json
.idea

# Vite
.vite
```

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
git init
git add .
git commit -m "chore: initial project setup with Vite 7 + React 19"
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] Git ä»“åº“åˆå§‹åŒ–
- [x] é¦–æ¬¡æäº¤å®Œæˆ
- [x] .gitignore é…ç½®æ­£ç¡®

---

### é˜¶æ®µ 0 éªŒæ”¶æ£€æŸ¥è¡¨

- [ ] é¡¹ç›®å¯ä»¥æ­£å¸¸å¯åŠ¨ï¼ˆ`npm run dev`ï¼‰
- [ ] æ‰€æœ‰ä¾èµ–å®‰è£…æ— é”™è¯¯
- [ ] TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
- [ ] ESLint æ£€æŸ¥é€šè¿‡
- [ ] å¯ä»¥æ·»åŠ  shadcn/ui ç»„ä»¶
- [ ] Git ç‰ˆæœ¬æ§åˆ¶é…ç½®å®Œæˆ

**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** Day 1 ä¸Šåˆ

---

## é˜¶æ®µ 1ï¼šåŸºç¡€æ¡†æ¶æ­å»º

**ç›®æ ‡ï¼š** å®Œæˆåº”ç”¨åŸºç¡€å¸ƒå±€å’Œè·¯ç”±ç»“æ„

**å·¥æ—¶ï¼š** 4-5 å°æ—¶

### ä»»åŠ¡æ¸…å•

#### 1.1 åˆ›å»ºç±»å‹å®šä¹‰ [P0]

**æ–‡ä»¶ï¼š** `src/types/index.ts`

```typescript
export enum FileStatus {
  PENDING = 'pending',
  PROCESSING = 'processing',
  SUCCESS = 'success',
  ERROR = 'error',
}

export interface UploadedFile {
  id: string;
  file: File;
  name: string;
  size: number;
  type: string;
  preview: string;
  status: FileStatus;
}

export interface ProcessedFile extends UploadedFile {
  progress: number;
  processedBlob?: Blob;
  error?: string;
  originalSize: number;
  compressedSize?: number;
  compressionRatio?: number;
  processingTime?: number;
}

export type OutputFormat = 'jpeg' | 'png' | 'webp';
export type CompressionMode = 'quality' | 'size';

export interface ConversionOptions {
  outputFormat: OutputFormat;
  quality: number;
  compressionMode: CompressionMode;
  targetSize?: number;
  maxWidthOrHeight?: number;
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰€æœ‰ç±»å‹å®šä¹‰æ¸…æ™°
- [x] æ—  TypeScript é”™è¯¯

---

#### 1.2 åˆ›å»º Zustand Store [P0]

**æ–‡ä»¶ï¼š** `src/store/useStore.ts`

```typescript
import { create } from 'zustand';
import { ProcessedFile, FileStatus, OutputFormat, CompressionMode } from '@/types';

interface AppState {
  // æ–‡ä»¶ç›¸å…³
  files: ProcessedFile[];
  addFiles: (files: File[]) => void;
  removeFile: (id: string) => void;
  clearFiles: () => void;
  updateFileStatus: (id: string, status: FileStatus, progress?: number) => void;
  updateFileResult: (id: string, blob: Blob, size: number) => void;

  // è®¾ç½®ç›¸å…³
  outputFormat: OutputFormat;
  quality: number;
  compressionMode: CompressionMode;
  targetSize?: number;
  setOutputFormat: (format: OutputFormat) => void;
  setQuality: (quality: number) => void;
  setCompressionMode: (mode: CompressionMode) => void;
  setTargetSize: (size?: number) => void;

  // å¤„ç†ç›¸å…³
  processing: boolean;
  totalProgress: number;
  setProcessing: (processing: boolean) => void;
  setTotalProgress: (progress: number) => void;
}

export const useStore = create<AppState>((set) => ({
  // åˆå§‹çŠ¶æ€
  files: [],
  outputFormat: 'jpeg',
  quality: 80,
  compressionMode: 'quality',
  targetSize: undefined,
  processing: false,
  totalProgress: 0,

  // Actions
  addFiles: (newFiles) => {
    const files = newFiles.map((file) => ({
      id: crypto.randomUUID(),
      file,
      name: file.name,
      size: file.size,
      type: file.type,
      preview: URL.createObjectURL(file),
      status: FileStatus.PENDING,
      progress: 0,
      originalSize: file.size,
    }));
    set((state) => ({ files: [...state.files, ...files] }));
  },

  removeFile: (id) => {
    set((state) => {
      const file = state.files.find((f) => f.id === id);
      if (file?.preview) URL.revokeObjectURL(file.preview);
      return { files: state.files.filter((f) => f.id !== id) };
    });
  },

  clearFiles: () => {
    set((state) => {
      state.files.forEach((f) => {
        if (f.preview) URL.revokeObjectURL(f.preview);
      });
      return { files: [] };
    });
  },

  updateFileStatus: (id, status, progress) => {
    set((state) => ({
      files: state.files.map((f) =>
        f.id === id ? { ...f, status, progress: progress ?? f.progress } : f
      ),
    }));
  },

  updateFileResult: (id, blob, size) => {
    set((state) => ({
      files: state.files.map((f) =>
        f.id === id
          ? {
              ...f,
              processedBlob: blob,
              compressedSize: size,
              compressionRatio: Math.round((1 - size / f.originalSize) * 100),
              status: FileStatus.SUCCESS,
              progress: 100,
            }
          : f
      ),
    }));
  },

  setOutputFormat: (format) => set({ outputFormat: format }),
  setQuality: (quality) => set({ quality }),
  setCompressionMode: (mode) => set({ compressionMode: mode }),
  setTargetSize: (size) => set({ targetSize: size }),
  setProcessing: (processing) => set({ processing }),
  setTotalProgress: (progress) => set({ totalProgress: progress }),
}));
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] Store åˆ›å»ºæˆåŠŸ
- [x] æ‰€æœ‰ Actions å®ç°
- [x] TypeScript ç±»å‹æ­£ç¡®

---

#### 1.3 æ·»åŠ  shadcn/ui åŸºç¡€ç»„ä»¶ [P0]

**æ‰§è¡Œå‘½ä»¤ï¼š**
```bash
npx shadcn@latest add button
npx shadcn@latest add card
npx shadcn@latest add progress
npx shadcn@latest add slider
npx shadcn@latest add radio-group
npx shadcn@latest add select
npx shadcn@latest add toast
npx shadcn@latest add separator
npx shadcn@latest add badge
npx shadcn@latest add alert
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰€æœ‰ç»„ä»¶æ·»åŠ æˆåŠŸ
- [x] å¯ä»¥æ­£å¸¸å¯¼å…¥ä½¿ç”¨

---

#### 1.4 åˆ›å»ºä¸»å¸ƒå±€ç»„ä»¶ [P0]

**æ–‡ä»¶ï¼š** `src/components/Header.tsx`

```typescript
export function Header() {
  return (
    <header className="border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <div className="container flex h-16 items-center justify-between">
        <div className="flex items-center gap-2">
          <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-primary">
            <span className="text-xl font-bold text-primary-foreground">è½»</span>
          </div>
          <div>
            <h1 className="text-xl font-bold">è½»å›¾ PicBatch</h1>
            <p className="text-xs text-muted-foreground">å…è´¹åœ¨çº¿å›¾ç‰‡æ‰¹é‡å¤„ç†</p>
          </div>
        </div>
        <nav className="flex items-center gap-4">
          <a href="#features" className="text-sm hover:text-primary">
            åŠŸèƒ½
          </a>
          <a href="#about" className="text-sm hover:text-primary">
            å…³äº
          </a>
        </nav>
      </div>
    </header>
  );
}
```

**æ–‡ä»¶ï¼š** `src/App.tsx`

```typescript
import { Header } from '@/components/Header';
import { Toaster } from '@/components/ui/toaster';

function App() {
  return (
    <div className="min-h-screen bg-background">
      <Header />
      <main className="container py-8">
        <div className="flex flex-col gap-8">
          {/* ä¸»è¦å†…å®¹åŒºåŸŸ */}
          <div className="text-center">
            <h2 className="text-3xl font-bold">å¼€å§‹å¤„ç†æ‚¨çš„å›¾ç‰‡</h2>
            <p className="mt-2 text-muted-foreground">
              ä¸Šä¼ ã€è½¬æ¢ã€å‹ç¼©ã€ä¸‹è½½ - å…¨åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆ
            </p>
          </div>

          {/* åŠŸèƒ½åŒºåŸŸå ä½ */}
          <div className="grid gap-6">
            {/* è¿™é‡Œå°†æ”¾ç½®ä¸Šä¼ ã€è®¾ç½®ã€æ–‡ä»¶åˆ—è¡¨ç­‰ç»„ä»¶ */}
          </div>
        </div>
      </main>
      <Toaster />
    </div>
  );
}

export default App;
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] é¡µé¢å¸ƒå±€å®Œæ•´
- [x] å“åº”å¼è®¾è®¡ç”Ÿæ•ˆ
- [x] æš—è‰²æ¨¡å¼æ”¯æŒ

---

#### 1.5 é…ç½®ä¸»é¢˜åˆ‡æ¢ [P2]

**æ–‡ä»¶ï¼š** `src/components/ThemeToggle.tsx`

```typescript
import { Moon, Sun } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { useEffect, useState } from 'react';

export function ThemeToggle() {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');

  useEffect(() => {
    const root = window.document.documentElement;
    root.classList.remove('light', 'dark');
    root.classList.add(theme);
  }, [theme]);

  return (
    <Button
      variant="ghost"
      size="icon"
      onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}
    >
      {theme === 'light' ? <Moon className="h-5 w-5" /> : <Sun className="h-5 w-5" />}
    </Button>
  );
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] ä¸»é¢˜åˆ‡æ¢æ­£å¸¸
- [x] æŒä¹…åŒ–å­˜å‚¨ï¼ˆå¯é€‰ï¼‰

---

### é˜¶æ®µ 1 éªŒæ”¶æ£€æŸ¥è¡¨

- [ ] ç±»å‹å®šä¹‰å®Œæ•´æ— è¯¯
- [ ] Zustand store åŠŸèƒ½æ­£å¸¸
- [ ] ä¸»å¸ƒå±€æ¸²æŸ“æ­£ç¡®
- [ ] å“åº”å¼è®¾è®¡åœ¨ç§»åŠ¨ç«¯æ­£å¸¸
- [ ] æš—è‰²æ¨¡å¼åˆ‡æ¢æ­£å¸¸

**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** Day 1 ä¸‹åˆ

---

## é˜¶æ®µ 2ï¼šæ–‡ä»¶ä¸Šä¼ æ¨¡å—

**ç›®æ ‡ï¼š** å®Œæˆæ‹–æ‹½ä¸Šä¼ ã€æ–‡ä»¶éªŒè¯å’Œåˆ—è¡¨å±•ç¤º

**å·¥æ—¶ï¼š** 6-8 å°æ—¶

### ä»»åŠ¡æ¸…å•

#### 2.1 åˆ›å»ºæ–‡ä»¶å·¥å…·å‡½æ•° [P0]

**æ–‡ä»¶ï¼š** `src/lib/fileUtils.ts`

```typescript
const MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB
const ALLOWED_TYPES = ['image/jpeg', 'image/png', 'image/webp', 'image/heic'];

export function validateFile(file: File): { valid: boolean; error?: string } {
  if (!ALLOWED_TYPES.includes(file.type) && !file.name.toLowerCase().endsWith('.heic')) {
    return { valid: false, error: 'ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼' };
  }

  if (file.size > MAX_FILE_SIZE) {
    return { valid: false, error: 'æ–‡ä»¶å¤§å°è¶…è¿‡ 50MB' };
  }

  return { valid: true };
}

export function formatFileSize(bytes: number): string {
  if (bytes === 0) return '0 B';
  const k = 1024;
  const sizes = ['B', 'KB', 'MB', 'GB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return `${(bytes / Math.pow(k, i)).toFixed(2)} ${sizes[i]}`;
}

export function getFileExtension(filename: string): string {
  return filename.split('.').pop()?.toLowerCase() || '';
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ–‡ä»¶éªŒè¯é€»è¾‘æ­£ç¡®
- [x] æ–‡ä»¶å¤§å°æ ¼å¼åŒ–æ­£ç¡®

---

#### 2.2 åˆ›å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶ [P0]

**æ–‡ä»¶ï¼š** `src/components/FileUploader.tsx`

```typescript
import { useCallback } from 'react';
import { useDropzone } from 'react-dropzone';
import { Upload, Image } from 'lucide-react';
import { Card } from '@/components/ui/card';
import { useStore } from '@/store/useStore';
import { validateFile } from '@/lib/fileUtils';
import { useToast } from '@/hooks/use-toast';

export function FileUploader() {
  const { addFiles } = useStore();
  const { toast } = useToast();

  const onDrop = useCallback(
    (acceptedFiles: File[]) => {
      const validFiles: File[] = [];
      const errors: string[] = [];

      acceptedFiles.forEach((file) => {
        const { valid, error } = validateFile(file);
        if (valid) {
          validFiles.push(file);
        } else {
          errors.push(`${file.name}: ${error}`);
        }
      });

      if (validFiles.length > 0) {
        addFiles(validFiles);
        toast({
          title: 'ä¸Šä¼ æˆåŠŸ',
          description: `å·²æ·»åŠ  ${validFiles.length} ä¸ªæ–‡ä»¶`,
        });
      }

      if (errors.length > 0) {
        toast({
          title: 'éƒ¨åˆ†æ–‡ä»¶ä¸Šä¼ å¤±è´¥',
          description: errors.join('\n'),
          variant: 'destructive',
        });
      }
    },
    [addFiles, toast]
  );

  const { getRootProps, getInputProps, isDragActive } = useDropzone({
    onDrop,
    accept: {
      'image/*': ['.jpg', '.jpeg', '.png', '.webp', '.heic'],
    },
    multiple: true,
  });

  return (
    <Card
      {...getRootProps()}
      className={`cursor-pointer border-2 border-dashed p-12 text-center transition-colors ${
        isDragActive ? 'border-primary bg-primary/5' : 'border-muted-foreground/25'
      }`}
    >
      <input {...getInputProps()} />
      <div className="flex flex-col items-center gap-4">
        {isDragActive ? (
          <>
            <Upload className="h-12 w-12 text-primary" />
            <p className="text-lg font-medium">æ¾å¼€ä»¥ä¸Šä¼ æ–‡ä»¶</p>
          </>
        ) : (
          <>
            <Image className="h-12 w-12 text-muted-foreground" />
            <div>
              <p className="text-lg font-medium">æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œ</p>
              <p className="text-sm text-muted-foreground">
                æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶ï¼ˆæ”¯æŒ JPGã€PNGã€WebPã€HEICï¼‰
              </p>
            </div>
            <p className="text-xs text-muted-foreground">
              æ”¯æŒæ‰¹é‡ä¸Šä¼ ï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§ 50MB
            </p>
          </>
        )}
      </div>
    </Card>
  );
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‹–æ‹½ä¸Šä¼ æ­£å¸¸
- [x] ç‚¹å‡»ä¸Šä¼ æ­£å¸¸
- [x] æ–‡ä»¶éªŒè¯ç”Ÿæ•ˆ
- [x] é”™è¯¯æç¤ºæ¸…æ™°

---

#### 2.3 åˆ›å»ºæ–‡ä»¶åˆ—è¡¨é¡¹ç»„ä»¶ [P0]

**æ–‡ä»¶ï¼š** `src/components/FileItem.tsx`

```typescript
import { ProcessedFile, FileStatus } from '@/types';
import { Card } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { Progress } from '@/components/ui/progress';
import { X, CheckCircle2, AlertCircle, Loader2 } from 'lucide-react';
import { formatFileSize } from '@/lib/fileUtils';
import { useStore } from '@/store/useStore';

interface FileItemProps {
  file: ProcessedFile;
}

export function FileItem({ file }: FileItemProps) {
  const { removeFile } = useStore();

  const getStatusIcon = () => {
    switch (file.status) {
      case FileStatus.SUCCESS:
        return <CheckCircle2 className="h-5 w-5 text-green-500" />;
      case FileStatus.ERROR:
        return <AlertCircle className="h-5 w-5 text-destructive" />;
      case FileStatus.PROCESSING:
        return <Loader2 className="h-5 w-5 animate-spin text-primary" />;
      default:
        return null;
    }
  };

  return (
    <Card className="p-4">
      <div className="flex items-center gap-4">
        {/* ç¼©ç•¥å›¾ */}
        <div className="relative h-16 w-16 flex-shrink-0 overflow-hidden rounded bg-muted">
          <img
            src={file.preview}
            alt={file.name}
            className="h-full w-full object-cover"
          />
        </div>

        {/* æ–‡ä»¶ä¿¡æ¯ */}
        <div className="flex-1 space-y-2">
          <div className="flex items-center justify-between">
            <p className="font-medium truncate">{file.name}</p>
            <Button
              variant="ghost"
              size="icon"
              className="h-8 w-8"
              onClick={() => removeFile(file.id)}
            >
              <X className="h-4 w-4" />
            </Button>
          </div>

          <div className="flex items-center gap-2 text-sm text-muted-foreground">
            <span>{formatFileSize(file.originalSize)}</span>
            {file.compressedSize && (
              <>
                <span>â†’</span>
                <span>{formatFileSize(file.compressedSize)}</span>
                <Badge variant="secondary" className="text-xs">
                  -{file.compressionRatio}%
                </Badge>
              </>
            )}
          </div>

          {/* è¿›åº¦æ¡ */}
          {file.status === FileStatus.PROCESSING && (
            <Progress value={file.progress} className="h-1" />
          )}

          {/* é”™è¯¯ä¿¡æ¯ */}
          {file.status === FileStatus.ERROR && file.error && (
            <p className="text-xs text-destructive">{file.error}</p>
          )}
        </div>

        {/* çŠ¶æ€å›¾æ ‡ */}
        <div className="flex-shrink-0">{getStatusIcon()}</div>
      </div>
    </Card>
  );
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ–‡ä»¶ä¿¡æ¯æ˜¾ç¤ºå®Œæ•´
- [x] ç¼©ç•¥å›¾æ­£å¸¸æ˜¾ç¤º
- [x] åˆ é™¤åŠŸèƒ½æ­£å¸¸
- [x] çŠ¶æ€æ˜¾ç¤ºæ­£ç¡®

---

#### 2.4 åˆ›å»ºæ–‡ä»¶åˆ—è¡¨ç»„ä»¶ [P0]

**æ–‡ä»¶ï¼š** `src/components/FileList.tsx`

```typescript
import { useStore } from '@/store/useStore';
import { FileItem } from './FileItem';
import { Button } from '@/components/ui/button';
import { Trash2 } from 'lucide-react';

export function FileList() {
  const { files, clearFiles } = useStore();

  if (files.length === 0) {
    return null;
  }

  return (
    <div className="space-y-4">
      <div className="flex items-center justify-between">
        <h3 className="text-lg font-semibold">
          å·²é€‰æ‹© {files.length} ä¸ªæ–‡ä»¶
        </h3>
        <Button variant="outline" size="sm" onClick={clearFiles}>
          <Trash2 className="mr-2 h-4 w-4" />
          æ¸…ç©ºå…¨éƒ¨
        </Button>
      </div>

      <div className="grid gap-3">
        {files.map((file) => (
          <FileItem key={file.id} file={file} />
        ))}
      </div>
    </div>
  );
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ–‡ä»¶åˆ—è¡¨æ¸²æŸ“æ­£å¸¸
- [x] æ¸…ç©ºåŠŸèƒ½æ­£å¸¸

---

#### 2.5 é›†æˆåˆ°ä¸»åº”ç”¨ [P0]

**æ›´æ–° `src/App.tsx`ï¼š**

```typescript
import { Header } from '@/components/Header';
import { FileUploader } from '@/components/FileUploader';
import { FileList } from '@/components/FileList';
import { Toaster } from '@/components/ui/toaster';

function App() {
  return (
    <div className="min-h-screen bg-background">
      <Header />
      <main className="container py-8">
        <div className="flex flex-col gap-8">
          <div className="text-center">
            <h2 className="text-3xl font-bold">å¼€å§‹å¤„ç†æ‚¨çš„å›¾ç‰‡</h2>
            <p className="mt-2 text-muted-foreground">
              ä¸Šä¼ ã€è½¬æ¢ã€å‹ç¼©ã€ä¸‹è½½ - å…¨åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆ
            </p>
          </div>

          <FileUploader />
          <FileList />
        </div>
      </main>
      <Toaster />
    </div>
  );
}

export default App;
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] ä¸Šä¼ å’Œåˆ—è¡¨è”åŠ¨æ­£å¸¸
- [x] æ•´ä½“å¸ƒå±€åˆç†

---

### é˜¶æ®µ 2 éªŒæ”¶æ£€æŸ¥è¡¨

- [ ] å¯ä»¥æ‹–æ‹½ä¸Šä¼ å›¾ç‰‡
- [ ] å¯ä»¥ç‚¹å‡»æŒ‰é’®é€‰æ‹©å›¾ç‰‡
- [ ] æ–‡ä»¶éªŒè¯æ­£å¸¸ï¼ˆç±»å‹ã€å¤§å°ï¼‰
- [ ] æ–‡ä»¶åˆ—è¡¨æ˜¾ç¤ºæ­£ç¡®
- [ ] å¯ä»¥åˆ é™¤å•ä¸ªæ–‡ä»¶
- [ ] å¯ä»¥æ¸…ç©ºæ‰€æœ‰æ–‡ä»¶
- [ ] é”™è¯¯æç¤ºå‹å¥½

**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** Day 2

---

## é˜¶æ®µ 3ï¼šæ ¼å¼è½¬æ¢æ ¸å¿ƒ

**ç›®æ ‡ï¼š** å®ç°å›¾ç‰‡æ ¼å¼è½¬æ¢æ ¸å¿ƒé€»è¾‘

**å·¥æ—¶ï¼š** 12-16 å°æ—¶

### ä»»åŠ¡æ¸…å•

#### 3.1 åˆ›å»ºå›¾ç‰‡å¤„ç†å·¥å…·å‡½æ•° [P0]

**æ–‡ä»¶ï¼š** `src/lib/imageUtils.ts`

```typescript
import { OutputFormat } from '@/types';

/**
 * å°†å›¾ç‰‡è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼
 */
export async function convertFormat(
  file: File,
  outputFormat: OutputFormat,
  quality: number = 90
): Promise<Blob> {
  // å¦‚æœæ˜¯ HEICï¼Œå…ˆè½¬æ¢ä¸º JPEG
  let sourceFile = file;
  if (file.type === 'image/heic' || file.name.toLowerCase().endsWith('.heic')) {
    sourceFile = await convertHEIC(file);
  }

  // ä½¿ç”¨ createImageBitmap è§£ç å›¾ç‰‡
  const imageBitmap = await createImageBitmap(sourceFile);

  // åˆ›å»º Canvas å¹¶ç»˜åˆ¶
  const canvas = document.createElement('canvas');
  canvas.width = imageBitmap.width;
  canvas.height = imageBitmap.height;

  const ctx = canvas.getContext('2d');
  if (!ctx) throw new Error('Failed to get canvas context');

  ctx.drawImage(imageBitmap, 0, 0);

  // è½¬æ¢ä¸ºç›®æ ‡æ ¼å¼
  const mimeType = `image/${outputFormat === 'jpeg' ? 'jpeg' : outputFormat}`;
  return new Promise((resolve, reject) => {
    canvas.toBlob(
      (blob) => {
        if (blob) {
          resolve(blob);
        } else {
          reject(new Error('Failed to convert image'));
        }
      },
      mimeType,
      quality / 100
    );
  });
}

/**
 * å°† HEIC æ ¼å¼è½¬æ¢ä¸º JPEG
 */
export async function convertHEIC(file: File): Promise<File> {
  const heic2any = (await import('heic2any')).default;

  const convertedBlob = (await heic2any({
    blob: file,
    toType: 'image/jpeg',
    quality: 0.9,
  })) as Blob;

  return new File([convertedBlob], file.name.replace(/\.heic$/i, '.jpg'), {
    type: 'image/jpeg',
  });
}

/**
 * è·å–è¾“å‡ºæ–‡ä»¶å
 */
export function getOutputFilename(
  originalName: string,
  outputFormat: OutputFormat
): string {
  const basename = originalName.replace(/\.[^/.]+$/, '');
  const ext = outputFormat === 'jpeg' ? 'jpg' : outputFormat;
  return `${basename}.${ext}`;
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ ¼å¼è½¬æ¢é€»è¾‘æ­£ç¡®
- [x] HEIC è½¬æ¢æ”¯æŒ
- [x] é”™è¯¯å¤„ç†å®Œå–„

---

#### 3.2 åˆ›å»ºå‹ç¼©å·¥å…·å‡½æ•° [P0]

**æ–‡ä»¶ï¼š** `src/lib/compression.ts`

```typescript
import imageCompression from 'browser-image-compression';

/**
 * æŒ‰è´¨é‡å‹ç¼©å›¾ç‰‡
 */
export async function compressByQuality(
  file: File,
  quality: number
): Promise<Blob> {
  const options = {
    maxWidthOrHeight: 4096,
    useWebWorker: true,
    initialQuality: quality / 100,
    alwaysKeepResolution: true,
  };

  return await imageCompression(file, options);
}

/**
 * æŒ‰ç›®æ ‡å¤§å°å‹ç¼©å›¾ç‰‡
 */
export async function compressBySize(
  file: File,
  targetSizeKB: number
): Promise<Blob> {
  const options = {
    maxSizeMB: targetSizeKB / 1024,
    maxWidthOrHeight: 4096,
    useWebWorker: true,
    initialQuality: 0.8,
    alwaysKeepResolution: false,
  };

  return await imageCompression(file, options);
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] è´¨é‡å‹ç¼©æ­£å¸¸
- [x] å¤§å°å‹ç¼©æ­£å¸¸

---

#### 3.3 åˆ›å»ºå·¥å…·é¢æ¿ç»„ä»¶ [P0]

**æ–‡ä»¶ï¼š** `src/components/ToolPanel.tsx`

```typescript
import { Card } from '@/components/ui/card';
import { Label } from '@/components/ui/label';
import { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';
import { Slider } from '@/components/ui/slider';
import { Input } from '@/components/ui/input';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { useStore } from '@/store/useStore';
import { OutputFormat, CompressionMode } from '@/types';

export function ToolPanel() {
  const {
    outputFormat,
    quality,
    compressionMode,
    targetSize,
    setOutputFormat,
    setQuality,
    setCompressionMode,
    setTargetSize,
  } = useStore();

  return (
    <Card className="p-6">
      <h3 className="mb-4 text-lg font-semibold">å¤„ç†è®¾ç½®</h3>

      <div className="space-y-6">
        {/* è¾“å‡ºæ ¼å¼ */}
        <div className="space-y-2">
          <Label>è¾“å‡ºæ ¼å¼</Label>
          <Select value={outputFormat} onValueChange={(v) => setOutputFormat(v as OutputFormat)}>
            <SelectTrigger>
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="jpeg">JPEG</SelectItem>
              <SelectItem value="png">PNG</SelectItem>
              <SelectItem value="webp">WebP</SelectItem>
            </SelectContent>
          </Select>
        </div>

        {/* å‹ç¼©æ¨¡å¼ */}
        <div className="space-y-2">
          <Label>å‹ç¼©æ¨¡å¼</Label>
          <RadioGroup
            value={compressionMode}
            onValueChange={(v) => setCompressionMode(v as CompressionMode)}
          >
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="quality" id="quality" />
              <Label htmlFor="quality" className="font-normal">
                è´¨é‡ä¼˜å…ˆ
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="size" id="size" />
              <Label htmlFor="size" className="font-normal">
                å¤§å°ä¼˜å…ˆ
              </Label>
            </div>
          </RadioGroup>
        </div>

        {/* è´¨é‡æ»‘å— */}
        {compressionMode === 'quality' && (
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <Label>å›¾ç‰‡è´¨é‡</Label>
              <span className="text-sm text-muted-foreground">{quality}%</span>
            </div>
            <Slider
              value={[quality]}
              onValueChange={([v]) => setQuality(v)}
              min={1}
              max={100}
              step={1}
            />
          </div>
        )}

        {/* ç›®æ ‡å¤§å° */}
        {compressionMode === 'size' && (
          <div className="space-y-2">
            <Label>ç›®æ ‡å¤§å° (KB)</Label>
            <Input
              type="number"
              value={targetSize || ''}
              onChange={(e) => setTargetSize(Number(e.target.value) || undefined)}
              placeholder="ä¾‹å¦‚: 500"
            />
          </div>
        )}
      </div>
    </Card>
  );
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ ¼å¼é€‰æ‹©æ­£å¸¸
- [x] å‹ç¼©æ¨¡å¼åˆ‡æ¢æ­£å¸¸
- [x] è´¨é‡æ»‘å—äº¤äº’æµç•…
- [x] ç›®æ ‡å¤§å°è¾“å…¥éªŒè¯

---

#### 3.4 åˆ›å»ºå›¾ç‰‡å¤„ç† Hook [P0]

**æ–‡ä»¶ï¼š** `src/hooks/useImageProcessor.ts`

```typescript
import { useCallback } from 'react';
import { useStore } from '@/store/useStore';
import { FileStatus } from '@/types';
import { convertFormat, getOutputFilename } from '@/lib/imageUtils';
import { compressByQuality, compressBySize } from '@/lib/compression';
import { useToast } from '@/hooks/use-toast';

export function useImageProcessor() {
  const {
    files,
    outputFormat,
    quality,
    compressionMode,
    targetSize,
    updateFileStatus,
    updateFileResult,
    setProcessing,
    setTotalProgress,
  } = useStore();
  const { toast } = useToast();

  const processFile = useCallback(
    async (fileId: string) => {
      const file = files.find((f) => f.id === fileId);
      if (!file) return;

      try {
        updateFileStatus(fileId, FileStatus.PROCESSING, 0);

        // 1. æ ¼å¼è½¬æ¢
        updateFileStatus(fileId, FileStatus.PROCESSING, 30);
        let blob = await convertFormat(file.file, outputFormat, quality);

        // 2. å‹ç¼©ï¼ˆå¦‚æœæ˜¯å¤§å°æ¨¡å¼ï¼‰
        if (compressionMode === 'size' && targetSize) {
          updateFileStatus(fileId, FileStatus.PROCESSING, 60);
          const tempFile = new File([blob], file.name, { type: blob.type });
          blob = await compressBySize(tempFile, targetSize);
        }

        // 3. å®Œæˆ
        updateFileStatus(fileId, FileStatus.PROCESSING, 100);
        updateFileResult(fileId, blob, blob.size);
      } catch (error) {
        console.error(`Failed to process ${file.name}:`, error);
        updateFileStatus(fileId, FileStatus.ERROR, 0);
        toast({
          title: 'å¤„ç†å¤±è´¥',
          description: `${file.name} å¤„ç†å¤±è´¥`,
          variant: 'destructive',
        });
      }
    },
    [files, outputFormat, quality, compressionMode, targetSize, updateFileStatus, updateFileResult, toast]
  );

  const processAllFiles = useCallback(async () => {
    if (files.length === 0) {
      toast({
        title: 'æ²¡æœ‰æ–‡ä»¶',
        description: 'è¯·å…ˆä¸Šä¼ å›¾ç‰‡',
        variant: 'destructive',
      });
      return;
    }

    setProcessing(true);
    setTotalProgress(0);

    const pendingFiles = files.filter((f) => f.status === FileStatus.PENDING);
    const total = pendingFiles.length;

    for (let i = 0; i < total; i++) {
      await processFile(pendingFiles[i].id);
      setTotalProgress(Math.round(((i + 1) / total) * 100));
    }

    setProcessing(false);
    toast({
      title: 'å¤„ç†å®Œæˆ',
      description: `æˆåŠŸå¤„ç† ${total} ä¸ªæ–‡ä»¶`,
    });
  }, [files, processFile, setProcessing, setTotalProgress, toast]);

  return {
    processAllFiles,
    processFile,
  };
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] å•ä¸ªæ–‡ä»¶å¤„ç†æ­£å¸¸
- [x] æ‰¹é‡å¤„ç†æ­£å¸¸
- [x] è¿›åº¦æ›´æ–°æ­£ç¡®
- [x] é”™è¯¯å¤„ç†å®Œå–„

---

#### 3.5 åˆ›å»ºå¤„ç†æŒ‰é’®ç»„ä»¶ [P0]

**æ–‡ä»¶ï¼š** `src/components/ProcessButton.tsx`

```typescript
import { Button } from '@/components/ui/button';
import { Progress } from '@/components/ui/progress';
import { Loader2, Play } from 'lucide-react';
import { useStore } from '@/store/useStore';
import { useImageProcessor } from '@/hooks/useImageProcessor';
import { FileStatus } from '@/types';

export function ProcessButton() {
  const { files, processing, totalProgress } = useStore();
  const { processAllFiles } = useImageProcessor();

  const pendingCount = files.filter((f) => f.status === FileStatus.PENDING).length;
  const canProcess = pendingCount > 0 && !processing;

  return (
    <div className="space-y-4">
      <Button
        onClick={processAllFiles}
        disabled={!canProcess}
        size="lg"
        className="w-full"
      >
        {processing ? (
          <>
            <Loader2 className="mr-2 h-5 w-5 animate-spin" />
            å¤„ç†ä¸­...
          </>
        ) : (
          <>
            <Play className="mr-2 h-5 w-5" />
            å¼€å§‹å¤„ç† ({pendingCount} ä¸ªæ–‡ä»¶)
          </>
        )}
      </Button>

      {processing && (
        <div className="space-y-2">
          <Progress value={totalProgress} />
          <p className="text-center text-sm text-muted-foreground">
            æ€»è¿›åº¦: {totalProgress}%
          </p>
        </div>
      )}
    </div>
  );
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æŒ‰é’®çŠ¶æ€æ­£ç¡®
- [x] è¿›åº¦æ˜¾ç¤ºæ­£å¸¸
- [x] ç¦ç”¨é€»è¾‘æ­£ç¡®

---

#### 3.6 é›†æˆåˆ°ä¸»åº”ç”¨ [P0]

**æ›´æ–° `src/App.tsx`ï¼š**

```typescript
import { Header } from '@/components/Header';
import { FileUploader } from '@/components/FileUploader';
import { FileList } from '@/components/FileList';
import { ToolPanel } from '@/components/ToolPanel';
import { ProcessButton } from '@/components/ProcessButton';
import { Toaster } from '@/components/ui/toaster';

function App() {
  return (
    <div className="min-h-screen bg-background">
      <Header />
      <main className="container py-8">
        <div className="flex flex-col gap-8">
          <div className="text-center">
            <h2 className="text-3xl font-bold">å¼€å§‹å¤„ç†æ‚¨çš„å›¾ç‰‡</h2>
            <p className="mt-2 text-muted-foreground">
              ä¸Šä¼ ã€è½¬æ¢ã€å‹ç¼©ã€ä¸‹è½½ - å…¨åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆ
            </p>
          </div>

          <div className="grid gap-6 lg:grid-cols-[1fr,300px]">
            <div className="space-y-6">
              <FileUploader />
              <FileList />
            </div>

            <div className="space-y-6">
              <ToolPanel />
              <ProcessButton />
            </div>
          </div>
        </div>
      </main>
      <Toaster />
    </div>
  );
}

export default App;
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] å¸ƒå±€åˆç†
- [x] å“åº”å¼æ­£å¸¸

---

### é˜¶æ®µ 3 éªŒæ”¶æ£€æŸ¥è¡¨

- [ ] JPG/PNG/WebP æ ¼å¼äº’è½¬æ­£å¸¸
- [ ] HEIC è½¬ JPG æ­£å¸¸
- [ ] è´¨é‡æ»‘å—å½±å“è¾“å‡ºè´¨é‡
- [ ] æ‰¹é‡å¤„ç†ä¸é˜»å¡ UI
- [ ] è¿›åº¦æ˜¾ç¤ºå‡†ç¡®
- [ ] é”™è¯¯å¤„ç†å®Œå–„

**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** Day 4

---

## é˜¶æ®µ 4ï¼šç”»è´¨å‹ç¼©åŠŸèƒ½

**ç›®æ ‡ï¼š** å®Œå–„æŒ‰è´¨é‡å’ŒæŒ‰å¤§å°çš„å‹ç¼©åŠŸèƒ½

**å·¥æ—¶ï¼š** 6-8 å°æ—¶

### ä»»åŠ¡æ¸…å•

#### 4.1 æµ‹è¯•è´¨é‡å‹ç¼© [P0]

**æµ‹è¯•ç”¨ä¾‹ï¼š**
1. ä¸Šä¼ ä¸€å¼  5MB çš„ JPG å›¾ç‰‡
2. è®¾ç½®è´¨é‡ä¸º 50%
3. å¤„ç†åéªŒè¯æ–‡ä»¶å¤§å°æ˜æ˜¾å‡å°
4. è§†è§‰è´¨é‡å¯æ¥å—

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] è´¨é‡å‹ç¼©ç”Ÿæ•ˆ
- [x] æ–‡ä»¶å¤§å°åˆç†
- [x] ç”»è´¨å¯æ¥å—

---

#### 4.2 æµ‹è¯•å¤§å°å‹ç¼© [P0]

**æµ‹è¯•ç”¨ä¾‹ï¼š**
1. ä¸Šä¼ ä¸€å¼  3MB çš„å›¾ç‰‡
2. è®¾ç½®ç›®æ ‡å¤§å° 500KB
3. å¤„ç†åéªŒè¯æ–‡ä»¶å¤§å°æ¥è¿‘ 500KB

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] å¤§å°å‹ç¼©ç”Ÿæ•ˆ
- [x] ç›®æ ‡å¤§å°è¾¾æˆ

---

#### 4.3 æ·»åŠ å‹ç¼©å‰åå¯¹æ¯” [P1]

**å¢å¼º `FileItem` ç»„ä»¶ï¼š**

```typescript
// åœ¨ FileItem ä¸­æ·»åŠ å‹ç¼©æ¯”ä¾‹æ˜¾ç¤º
{file.compressionRatio !== undefined && (
  <div className="flex items-center gap-2">
    <Badge variant="secondary">
      å‹ç¼© {file.compressionRatio}%
    </Badge>
    <span className="text-xs text-muted-foreground">
      {formatFileSize(file.originalSize)} â†’ {formatFileSize(file.compressedSize!)}
    </span>
  </div>
)}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] å‹ç¼©æ¯”ä¾‹æ˜¾ç¤ºæ­£ç¡®
- [x] æ–‡ä»¶å¤§å°å¯¹æ¯”æ¸…æ™°

---

### é˜¶æ®µ 4 éªŒæ”¶æ£€æŸ¥è¡¨

- [ ] è´¨é‡å‹ç¼©æ­£å¸¸å·¥ä½œ
- [ ] å¤§å°å‹ç¼©æ­£å¸¸å·¥ä½œ
- [ ] å‹ç¼©æ¯”ä¾‹è®¡ç®—æ­£ç¡®
- [ ] å‹ç¼©å‰åå¯¹æ¯”æ¸…æ™°

**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** Day 5

---

## é˜¶æ®µ 5ï¼šæ‰¹é‡ä¸‹è½½åŠŸèƒ½

**ç›®æ ‡ï¼š** å®ç° ZIP æ‰“åŒ…å’Œæ‰¹é‡ä¸‹è½½

**å·¥æ—¶ï¼š** 6-8 å°æ—¶

### ä»»åŠ¡æ¸…å•

#### 5.1 åˆ›å»º ZIP å·¥å…·å‡½æ•° [P0]

**æ–‡ä»¶ï¼š** `src/lib/zipUtils.ts`

```typescript
import JSZip from 'jszip';
import { saveAs } from 'file-saver';
import { ProcessedFile } from '@/types';
import { getOutputFilename } from './imageUtils';

export async function createAndDownloadZip(
  files: ProcessedFile[],
  outputFormat: string,
  onProgress?: (percent: number) => void
): Promise<void> {
  const zip = new JSZip();
  const nameCounter = new Map<string, number>();

  // æ·»åŠ æ–‡ä»¶åˆ° ZIP
  files.forEach((file) => {
    if (!file.processedBlob) return;

    // ç”Ÿæˆæ–‡ä»¶å
    let filename = getOutputFilename(file.name, outputFormat as any);

    // å¤„ç†é‡å
    if (nameCounter.has(filename)) {
      const count = nameCounter.get(filename)! + 1;
      nameCounter.set(filename, count);
      const ext = filename.split('.').pop();
      const basename = filename.replace(`.${ext}`, '');
      filename = `${basename}_${count}.${ext}`;
    } else {
      nameCounter.set(filename, 1);
    }

    zip.file(filename, file.processedBlob);
  });

  // ç”Ÿæˆ ZIP
  const content = await zip.generateAsync(
    {
      type: 'blob',
      compression: 'DEFLATE',
      compressionOptions: { level: 6 },
    },
    (metadata) => {
      onProgress?.(metadata.percent);
    }
  );

  // ä¸‹è½½
  const timestamp = new Date().toISOString().slice(0, 10);
  saveAs(content, `PicBatch_${timestamp}.zip`);
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] ZIP ç”Ÿæˆæ­£å¸¸
- [x] æ–‡ä»¶åå¤„ç†æ­£ç¡®
- [x] é‡åå¤„ç†æ­£å¸¸

---

#### 5.2 åˆ›å»ºä¸‹è½½æŒ‰é’®ç»„ä»¶ [P0]

**æ–‡ä»¶ï¼š** `src/components/DownloadButton.tsx`

```typescript
import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Progress } from '@/components/ui/progress';
import { Download, Loader2 } from 'lucide-react';
import { useStore } from '@/store/useStore';
import { FileStatus } from '@/types';
import { createAndDownloadZip } from '@/lib/zipUtils';
import { useToast } from '@/hooks/use-toast';

export function DownloadButton() {
  const { files, outputFormat } = useStore();
  const { toast } = useToast();
  const [downloading, setDownloading] = useState(false);
  const [downloadProgress, setDownloadProgress] = useState(0);

  const successCount = files.filter((f) => f.status === FileStatus.SUCCESS).length;

  const handleDownload = async () => {
    if (successCount === 0) {
      toast({
        title: 'æ²¡æœ‰å¯ä¸‹è½½çš„æ–‡ä»¶',
        description: 'è¯·å…ˆå¤„ç†å›¾ç‰‡',
        variant: 'destructive',
      });
      return;
    }

    setDownloading(true);
    setDownloadProgress(0);

    try {
      const successFiles = files.filter((f) => f.status === FileStatus.SUCCESS);
      await createAndDownloadZip(successFiles, outputFormat, setDownloadProgress);

      toast({
        title: 'ä¸‹è½½æˆåŠŸ',
        description: `å·²ä¸‹è½½ ${successCount} ä¸ªæ–‡ä»¶`,
      });
    } catch (error) {
      console.error('Download failed:', error);
      toast({
        title: 'ä¸‹è½½å¤±è´¥',
        description: 'æ‰“åŒ…æ–‡ä»¶æ—¶å‡ºé”™',
        variant: 'destructive',
      });
    } finally {
      setDownloading(false);
    }
  };

  return (
    <div className="space-y-4">
      <Button
        onClick={handleDownload}
        disabled={successCount === 0 || downloading}
        size="lg"
        className="w-full"
        variant="secondary"
      >
        {downloading ? (
          <>
            <Loader2 className="mr-2 h-5 w-5 animate-spin" />
            æ‰“åŒ…ä¸­...
          </>
        ) : (
          <>
            <Download className="mr-2 h-5 w-5" />
            ä¸‹è½½å…¨éƒ¨ ({successCount} ä¸ªæ–‡ä»¶)
          </>
        )}
      </Button>

      {downloading && (
        <div className="space-y-2">
          <Progress value={downloadProgress} />
          <p className="text-center text-sm text-muted-foreground">
            æ‰“åŒ…è¿›åº¦: {Math.round(downloadProgress)}%
          </p>
        </div>
      )}
    </div>
  );
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] ä¸‹è½½æŒ‰é’®çŠ¶æ€æ­£ç¡®
- [x] æ‰“åŒ…è¿›åº¦æ˜¾ç¤ºæ­£å¸¸
- [x] ä¸‹è½½æˆåŠŸ

---

#### 5.3 é›†æˆåˆ°ä¸»åº”ç”¨ [P0]

**æ›´æ–° `src/App.tsx`ï¼š**

```typescript
<div className="space-y-6">
  <ToolPanel />
  <ProcessButton />
  <DownloadButton />
</div>
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] ä¸‹è½½æŒ‰é’®æ˜¾ç¤ºæ­£å¸¸
- [x] åŠŸèƒ½é›†æˆæˆåŠŸ

---

### é˜¶æ®µ 5 éªŒæ”¶æ£€æŸ¥è¡¨

- [ ] å¯ä»¥æ‰“åŒ…æ‰€æœ‰å·²å¤„ç†çš„æ–‡ä»¶
- [ ] ZIP æ–‡ä»¶å‘½ååˆç†
- [ ] æ–‡ä»¶é‡åå¤„ç†æ­£ç¡®
- [ ] æ‰“åŒ…è¿›åº¦æ˜¾ç¤ºå‡†ç¡®
- [ ] ä¸‹è½½è§¦å‘æ­£å¸¸

**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** Day 6

---

## é˜¶æ®µ 6ï¼šè¿›åº¦ä¸çŠ¶æ€ç®¡ç†

**ç›®æ ‡ï¼š** å®Œå–„è¿›åº¦æ˜¾ç¤ºå’ŒçŠ¶æ€åé¦ˆ

**å·¥æ—¶ï¼š** 6-8 å°æ—¶

### ä»»åŠ¡æ¸…å•

#### 6.1 ä¼˜åŒ–æ–‡ä»¶çŠ¶æ€æ˜¾ç¤º [P0]

å·²åœ¨ `FileItem` ç»„ä»¶ä¸­å®ç°ï¼ŒéªŒè¯ï¼š

- [x] ç­‰å¾…çŠ¶æ€æ˜¾ç¤º
- [x] å¤„ç†ä¸­çŠ¶æ€ï¼ˆåŠ è½½åŠ¨ç”»ï¼‰
- [x] æˆåŠŸçŠ¶æ€ï¼ˆç»¿è‰²å‹¾ï¼‰
- [x] å¤±è´¥çŠ¶æ€ï¼ˆçº¢è‰²å‰ï¼‰

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰€æœ‰çŠ¶æ€å›¾æ ‡æ­£ç¡®
- [x] çŠ¶æ€åˆ‡æ¢æµç•…

---

#### 6.2 æ·»åŠ æ€»ä½“ç»Ÿè®¡ä¿¡æ¯ [P1]

**åˆ›å»ºç»„ä»¶ï¼š** `src/components/Statistics.tsx`

```typescript
import { Card } from '@/components/ui/card';
import { useStore } from '@/store/useStore';
import { FileStatus } from '@/types';
import { formatFileSize } from '@/lib/fileUtils';

export function Statistics() {
  const { files } = useStore();

  const stats = {
    total: files.length,
    pending: files.filter((f) => f.status === FileStatus.PENDING).length,
    processing: files.filter((f) => f.status === FileStatus.PROCESSING).length,
    success: files.filter((f) => f.status === FileStatus.SUCCESS).length,
    error: files.filter((f) => f.status === FileStatus.ERROR).length,
    originalSize: files.reduce((sum, f) => sum + f.originalSize, 0),
    compressedSize: files.reduce((sum, f) => sum + (f.compressedSize || 0), 0),
  };

  const savedRatio =
    stats.compressedSize > 0
      ? Math.round((1 - stats.compressedSize / stats.originalSize) * 100)
      : 0;

  if (files.length === 0) return null;

  return (
    <Card className="p-4">
      <div className="grid grid-cols-2 gap-4 text-sm md:grid-cols-4">
        <div>
          <p className="text-muted-foreground">æ€»æ–‡ä»¶æ•°</p>
          <p className="text-2xl font-bold">{stats.total}</p>
        </div>
        <div>
          <p className="text-muted-foreground">å·²å®Œæˆ</p>
          <p className="text-2xl font-bold text-green-600">{stats.success}</p>
        </div>
        <div>
          <p className="text-muted-foreground">åŸå§‹å¤§å°</p>
          <p className="text-xl font-semibold">{formatFileSize(stats.originalSize)}</p>
        </div>
        {stats.compressedSize > 0 && (
          <div>
            <p className="text-muted-foreground">å‹ç¼©å</p>
            <p className="text-xl font-semibold">
              {formatFileSize(stats.compressedSize)}
              <span className="ml-2 text-sm text-green-600">(-{savedRatio}%)</span>
            </p>
          </div>
        )}
      </div>
    </Card>
  );
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] ç»Ÿè®¡æ•°æ®æ­£ç¡®
- [x] å®æ—¶æ›´æ–°

---

#### 6.3 æ·»åŠ  Toast é€šçŸ¥ä¼˜åŒ– [P1]

ç¡®ä¿ä»¥ä¸‹åœºæ™¯éƒ½æœ‰æ¸…æ™°çš„é€šçŸ¥ï¼š

- [x] æ–‡ä»¶ä¸Šä¼ æˆåŠŸ/å¤±è´¥
- [x] æ–‡ä»¶å¤„ç†å¼€å§‹/å®Œæˆ/å¤±è´¥
- [x] æ‰¹é‡å¤„ç†å®Œæˆ
- [x] ä¸‹è½½å¼€å§‹/å®Œæˆ/å¤±è´¥

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰€æœ‰æ“ä½œéƒ½æœ‰åé¦ˆ
- [x] é€šçŸ¥å†…å®¹æ¸…æ™°

---

### é˜¶æ®µ 6 éªŒæ”¶æ£€æŸ¥è¡¨

- [ ] æ–‡ä»¶çŠ¶æ€å›¾æ ‡æ¸…æ™°
- [ ] è¿›åº¦æ¡æ›´æ–°æµç•…
- [ ] ç»Ÿè®¡ä¿¡æ¯å‡†ç¡®
- [ ] Toast é€šçŸ¥å®Œå–„
- [ ] é”™è¯¯ä¿¡æ¯å‹å¥½

**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** Day 7

---

## é˜¶æ®µ 7ï¼šä¼˜åŒ–ä¸æµ‹è¯•

**ç›®æ ‡ï¼š** æ€§èƒ½ä¼˜åŒ–ã€å…¼å®¹æ€§æµ‹è¯•ã€ä½“éªŒä¼˜åŒ–

**å·¥æ—¶ï¼š** 8-10 å°æ—¶

### ä»»åŠ¡æ¸…å•

#### 7.1 å®ç° Web Worker [P1]

**æ–‡ä»¶ï¼š** `src/workers/imageProcessor.worker.ts`

```typescript
import { convertFormat } from '../lib/imageUtils';
import { compressBySize } from '../lib/compression';

interface WorkerMessage {
  id: string;
  file: File;
  options: {
    outputFormat: 'jpeg' | 'png' | 'webp';
    quality: number;
    compressionMode: 'quality' | 'size';
    targetSize?: number;
  };
}

self.addEventListener('message', async (e: MessageEvent<WorkerMessage>) => {
  const { id, file, options } = e.data;

  try {
    // æ ¼å¼è½¬æ¢
    let blob = await convertFormat(file, options.outputFormat, options.quality);

    // å‹ç¼©
    if (options.compressionMode === 'size' && options.targetSize) {
      const tempFile = new File([blob], file.name, { type: blob.type });
      blob = await compressBySize(tempFile, options.targetSize);
    }

    self.postMessage({
      id,
      success: true,
      blob,
      size: blob.size,
    });
  } catch (error) {
    self.postMessage({
      id,
      success: false,
      error: error instanceof Error ? error.message : 'Unknown error',
    });
  }
});
```

**æ›´æ–° Hook ä½¿ç”¨ Workerï¼š** ï¼ˆå¯é€‰ï¼Œå¦‚æœæ€§èƒ½æœ‰é—®é¢˜ï¼‰

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] Worker å·¥ä½œæ­£å¸¸
- [x] UI ä¸é˜»å¡

---

#### 7.2 æ€§èƒ½æµ‹è¯• [P0]

**æµ‹è¯•åœºæ™¯ï¼š**

| åœºæ™¯ | è¦æ±‚ | å®é™… | é€šè¿‡ |
|------|------|------|------|
| ä¸Šä¼  50 å¼ å›¾ç‰‡ | ä¸å´©æºƒ | ? | â¬œ |
| å•å¼ å›¾ç‰‡å¤„ç† | â‰¤2ç§’ | ? | â¬œ |
| 50 å¼ æ‰¹é‡å¤„ç† | â‰¤2åˆ†é’Ÿ | ? | â¬œ |
| é¦–å±åŠ è½½ | <3MB | ? | â¬œ |
| å†…å­˜å ç”¨ | æ­£å¸¸ | ? | â¬œ |

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰€æœ‰åœºæ™¯é€šè¿‡

---

#### 7.3 ç§»åŠ¨ç«¯é€‚é…æµ‹è¯• [P0]

**æµ‹è¯•è®¾å¤‡ï¼š**

- [ ] iPhone Safari
- [ ] Android Chrome
- [ ] å¾®ä¿¡å†…ç½®æµè§ˆå™¨

**æµ‹è¯•é¡¹ï¼š**

- [ ] ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] æŒ‰é’®å¯ç‚¹å‡»ï¼ˆæœ€å° 44pxï¼‰
- [ ] æ»‘å—æ˜“æ“ä½œ
- [ ] å¸ƒå±€åˆç†ä¸æº¢å‡º
- [ ] æ€§èƒ½å¯æ¥å—

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰€æœ‰è®¾å¤‡æ­£å¸¸å·¥ä½œ

---

#### 7.4 æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯• [P0]

**æµ‹è¯•æµè§ˆå™¨ï¼š**

- [ ] Chrome (æœ€æ–°ç‰ˆ)
- [ ] Edge (æœ€æ–°ç‰ˆ)
- [ ] Safari (æœ€æ–°ç‰ˆ)
- [ ] å¾®ä¿¡æµè§ˆå™¨

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ ¸å¿ƒåŠŸèƒ½éƒ½æ­£å¸¸

---

#### 7.5 ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½ [P1]

**æ›´æ–° `vite.config.ts`ï¼š**

```typescript
build: {
  rollupOptions: {
    output: {
      manualChunks: {
        'vendor-react': ['react', 'react-dom'],
        'vendor-ui': ['@radix-ui/react-dropdown-menu', '@radix-ui/react-slider'],
        'vendor-image': ['browser-image-compression', 'heic2any'],
        'vendor-zip': ['jszip', 'file-saver'],
      },
    },
  },
},
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰“åŒ…ä½“ç§¯ <3MB
- [x] ä»£ç åˆ†å‰²åˆç†

---

#### 7.6 æ·»åŠ åŠ è½½çŠ¶æ€å’Œéª¨æ¶å± [P2]

**åˆ›å»º Loading ç»„ä»¶ï¼š** `src/components/ui/skeleton.tsx`

ï¼ˆä½¿ç”¨ shadcn/uiï¼‰

```bash
npx shadcn@latest add skeleton
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] åŠ è½½ä½“éªŒæµç•…

---

#### 7.7 é”™è¯¯è¾¹ç•Œ [P1]

**åˆ›å»ºç»„ä»¶ï¼š** `src/components/ErrorBoundary.tsx`

```typescript
import { Component, ReactNode } from 'react';

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
}

export class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError() {
    return { hasError: true };
  }

  componentDidCatch(error: Error, errorInfo: any) {
    console.error('Error caught by boundary:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return (
        <div className="flex min-h-screen items-center justify-center">
          <div className="text-center">
            <h1 className="text-2xl font-bold">å‡ºé”™äº†</h1>
            <p className="mt-2 text-muted-foreground">è¯·åˆ·æ–°é¡µé¢é‡è¯•</p>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}
```

**åœ¨ `main.tsx` ä¸­ä½¿ç”¨ï¼š**

```typescript
<ErrorBoundary>
  <App />
</ErrorBoundary>
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] é”™è¯¯æ•è·æ­£å¸¸
- [x] å‹å¥½çš„é”™è¯¯æç¤º

---

#### 7.8 æ·»åŠ  SEO å…ƒæ•°æ® [P1]

**æ›´æ–° `index.html`ï¼š**

```html
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO -->
    <meta name="description" content="è½»å›¾ - å…è´¹åœ¨çº¿å›¾ç‰‡æ‰¹é‡å¤„ç†å·¥å…·ï¼Œæ”¯æŒæ ¼å¼è½¬æ¢ã€å‹ç¼©ã€è£å‰ªã€‚å®Œå…¨åœ¨æµè§ˆå™¨æœ¬åœ°å¤„ç†ï¼Œä¿æŠ¤æ‚¨çš„éšç§ã€‚" />
    <meta name="keywords" content="å›¾ç‰‡è½¬æ¢,å›¾ç‰‡å‹ç¼©,æ‰¹é‡å¤„ç†,JPGè½¬PNG,WebP,åœ¨çº¿å·¥å…·" />
    <meta name="author" content="PicBatch" />

    <!-- Open Graph -->
    <meta property="og:title" content="è½»å›¾ PicBatch - å…è´¹åœ¨çº¿å›¾ç‰‡æ‰¹é‡å¤„ç†" />
    <meta property="og:description" content="å…è´¹ã€å¿«é€Ÿã€éšç§å®‰å…¨çš„åœ¨çº¿å›¾ç‰‡å¤„ç†å·¥å…·" />
    <meta property="og:type" content="website" />

    <title>è½»å›¾ PicBatch - å…è´¹åœ¨çº¿å›¾ç‰‡æ‰¹é‡å¤„ç†</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] SEO æ ‡ç­¾å®Œæ•´

---

#### 7.9 æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥ [P0]

**è¿è¡Œæ„å»ºï¼š**

```bash
npm run build
```

**æ£€æŸ¥é¡¹ï¼š**

- [ ] æ‰“åŒ…ä½“ç§¯ <3MB
- [ ] Lighthouse åˆ†æ•° >90
- [ ] æ—  console é”™è¯¯
- [ ] æ—  TypeScript é”™è¯¯

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] æ‰€æœ‰æ£€æŸ¥é€šè¿‡

---

### é˜¶æ®µ 7 éªŒæ”¶æ£€æŸ¥è¡¨

- [ ] 50 å¼ å›¾ç‰‡æ‰¹é‡å¤„ç†ä¸å¡é¡¿
- [ ] ç§»åŠ¨ç«¯ä½“éªŒæµç•…
- [ ] æ‰€æœ‰æµè§ˆå™¨å…¼å®¹
- [ ] æ‰“åŒ…ä½“ç§¯è¾¾æ ‡
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] SEO ä¼˜åŒ–å®Œæˆ

**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** Day 8

---

## é˜¶æ®µ 8ï¼šéƒ¨ç½²ä¸Šçº¿

**ç›®æ ‡ï¼š** éƒ¨ç½²åˆ° Vercelï¼Œé…ç½®åŸŸåï¼Œç›‘æ§ä¸Šçº¿

**å·¥æ—¶ï¼š** 4-6 å°æ—¶

### ä»»åŠ¡æ¸…å•

#### 8.1 å‡†å¤‡éƒ¨ç½² [P0]

**åˆ›å»º `vercel.json`ï¼š**

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite",
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "Cross-Origin-Embedder-Policy",
          "value": "require-corp"
        },
        {
          "key": "Cross-Origin-Opener-Policy",
          "value": "same-origin"
        }
      ]
    }
  ]
}
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] vercel.json é…ç½®å®Œæˆ

---

#### 8.2 Vercel éƒ¨ç½² [P0]

**æ‰§è¡Œæ­¥éª¤ï¼š**

1. è®¿é—® [vercel.com](https://vercel.com)
2. è¿æ¥ GitHub ä»“åº“
3. å¯¼å…¥é¡¹ç›®
4. è‡ªåŠ¨éƒ¨ç½²

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] éƒ¨ç½²æˆåŠŸ
- [x] å¯ä»¥è®¿é—®

---

#### 8.3 é…ç½®ç¯å¢ƒå˜é‡ [P1]

**åœ¨ Vercel Dashboard è®¾ç½®ï¼š**

```
VITE_APP_NAME=è½»å›¾ PicBatch
VITE_APP_VERSION=1.0.0
VITE_MAX_FILE_SIZE=52428800
VITE_MAX_FILES=50
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ

---

#### 8.4 é…ç½®è‡ªå®šä¹‰åŸŸå [P2]

ï¼ˆå¯é€‰ï¼Œå¦‚æœæœ‰åŸŸåï¼‰

**æ­¥éª¤ï¼š**
1. åœ¨ Vercel æ·»åŠ åŸŸå
2. é…ç½® DNS è®°å½•
3. ç­‰å¾…ç”Ÿæ•ˆ

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] åŸŸåè®¿é—®æ­£å¸¸
- [x] HTTPS ç”Ÿæ•ˆ

---

#### 8.5 æ·»åŠ éšç§å£°æ˜é¡µé¢ [P1]

**åˆ›å»ºç»„ä»¶ï¼š** `src/components/PrivacyNotice.tsx`

```typescript
import { Alert, AlertDescription } from '@/components/ui/alert';
import { Shield } from 'lucide-react';

export function PrivacyNotice() {
  return (
    <Alert className="border-green-500/50 bg-green-500/10">
      <Shield className="h-4 w-4 text-green-600" />
      <AlertDescription>
        <strong>éšç§ä¿æŠ¤ï¼š</strong>
        æ‰€æœ‰å›¾ç‰‡å¤„ç†å®Œå…¨åœ¨æ‚¨çš„æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚
      </AlertDescription>
    </Alert>
  );
}
```

**é›†æˆåˆ° Appï¼š**

```typescript
<div className="text-center">
  <h2 className="text-3xl font-bold">å¼€å§‹å¤„ç†æ‚¨çš„å›¾ç‰‡</h2>
  <p className="mt-2 text-muted-foreground">
    ä¸Šä¼ ã€è½¬æ¢ã€å‹ç¼©ã€ä¸‹è½½ - å…¨åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆ
  </p>
  <div className="mt-4">
    <PrivacyNotice />
  </div>
</div>
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] éšç§å£°æ˜æ˜¾ç¤º

---

#### 8.6 è®¾ç½® Google Analytics [P2]

ï¼ˆå¯é€‰ï¼‰

**å®‰è£…ï¼š**

```bash
npm install @vercel/analytics
```

**é›†æˆï¼š**

```typescript
import { Analytics } from '@vercel/analytics/react';

<Analytics />
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] åˆ†æå·¥å…·ç”Ÿæ•ˆ

---

#### 8.7 æ·»åŠ  README [P1]

**åˆ›å»º `README.md`ï¼š**

```markdown
# è½»å›¾ PicBatch

å…è´¹ã€å¼€æºçš„åœ¨çº¿å›¾ç‰‡æ‰¹é‡å¤„ç†å·¥å…·

## åŠŸèƒ½ç‰¹æ€§

- ğŸ–¼ï¸ æ ¼å¼è½¬æ¢ï¼ˆJPG/PNG/WebP/HEICï¼‰
- ğŸ“¦ æ‰¹é‡å¤„ç†ï¼ˆæœ€å¤š 50 å¼ ï¼‰
- ğŸ¨ ç”»è´¨å‹ç¼©
- ğŸ”’ éšç§ä¼˜å…ˆï¼ˆæœ¬åœ°å¤„ç†ï¼‰
- ğŸ“± ç§»åŠ¨ç«¯æ”¯æŒ

## æŠ€æœ¯æ ˆ

- React 19
- Vite 7
- TypeScript
- shadcn/ui
- Zustand

## å¼€å‘

\`\`\`bash
npm install
npm run dev
\`\`\`

## æ„å»º

\`\`\`bash
npm run build
\`\`\`

## License

MIT
```

**éªŒæ”¶æ ‡å‡†ï¼š**
- [x] README å®Œæ•´

---

### é˜¶æ®µ 8 éªŒæ”¶æ£€æŸ¥è¡¨

- [ ] Vercel éƒ¨ç½²æˆåŠŸ
- [ ] ç”Ÿäº§ç¯å¢ƒå¯è®¿é—®
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
- [ ] HTTPS å¯ç”¨
- [ ] éšç§å£°æ˜æ˜¾ç¤º
- [ ] README å®Œæ•´

**é¢„è®¡å®Œæˆæ—¶é—´ï¼š** Day 9

---

## åç»­ç‰ˆæœ¬è§„åˆ’

### Version 1.1 (MVP + 2 å‘¨)

**æ–°å¢åŠŸèƒ½ï¼š**

- [ ] æ‰¹é‡è£å‰ªï¼ˆ1:1ã€16:9ã€4:3ã€è‡ªå®šä¹‰ï¼‰
- [ ] æ‰¹é‡é‡å‘½åï¼ˆå‰ç¼€ + åºå·ï¼‰
- [ ] æŒ‰ç›®æ ‡å¤§å°å‹ç¼©ä¼˜åŒ–
- [ ] Google AdSense æ¥å…¥
- [ ] IndexedDB ç¼“å­˜å¤„ç†è®°å½•

**é¢„è®¡å·¥æ—¶ï¼š** 80 å°æ—¶

---

### Version 1.2 (MVP + 6 å‘¨)

**æ–°å¹³å°ï¼š**

- [ ] å¾®ä¿¡å°ç¨‹åºï¼ˆTaro æ¡†æ¶ï¼‰
- [ ] å“åº”å¼ä¼˜åŒ–å‡çº§
- [ ] PWA æ”¯æŒï¼ˆç¦»çº¿ä½¿ç”¨ï¼‰
- [ ] å›½é™…åŒ–ï¼ˆä¸­è‹±æ–‡åˆ‡æ¢ï¼‰

**é¢„è®¡å·¥æ—¶ï¼š** 120 å°æ—¶

---

### Version 2.0 (MVP + 3 ä¸ªæœˆ)

**é«˜çº§åŠŸèƒ½ï¼š**

- [ ] AI æ™ºèƒ½è£å‰ªï¼ˆäººè„¸è¯†åˆ«ï¼‰
- [ ] æ‰¹é‡æ°´å°æ·»åŠ 
- [ ] å›¾ç‰‡ç¾åŒ–æ»¤é•œ
- [ ] API æœåŠ¡ï¼ˆä»˜è´¹ï¼‰

**é¢„è®¡å·¥æ—¶ï¼š** 200 å°æ—¶

---

## é£é™©æ§åˆ¶

### æŠ€æœ¯é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | å¯¹ç­– | è´Ÿè´£äºº |
|------|------|------|------|--------|
| HEIC å…¼å®¹æ€§é—®é¢˜ | ä¸­ | ä¸­ | ä½¿ç”¨ heic2anyï¼Œæä¾›é™çº§æ–¹æ¡ˆ | å¾…å®š |
| 50 å¼ å›¾ç‰‡å¤„ç†å¡é¡¿ | ä¸­ | é«˜ | Web Worker + åˆ†æ‰¹å¤„ç† | å¾…å®š |
| å¾®ä¿¡æµè§ˆå™¨å…¼å®¹æ€§ | ä½ | é«˜ | å……åˆ†æµ‹è¯•ï¼Œé™çº§æ–¹æ¡ˆ | å¾…å®š |
| é¦–å±åŠ è½½è¶… 3MB | ä¸­ | ä¸­ | ä»£ç åˆ†å‰²ï¼Œæ‡’åŠ è½½ | å¾…å®š |

### è¿›åº¦é£é™©

| é£é™© | åº”å¯¹æªæ–½ |
|------|----------|
| å¼€å‘å»¶æœŸ | ç æ‰ P2 ä¼˜å…ˆçº§åŠŸèƒ½ |
| æµ‹è¯•ä¸å……åˆ† | å»¶é•¿æµ‹è¯•é˜¶æ®µ 1-2 å¤© |
| éƒ¨ç½²é—®é¢˜ | é¢„ç•™ 1 å¤©ç¼“å†²æ—¶é—´ |

---

## é¡¹ç›®æ£€æŸ¥æ¸…å•ï¼ˆæœ€ç»ˆä¸Šçº¿å‰ï¼‰

### åŠŸèƒ½æ£€æŸ¥

- [ ] å¯ä»¥ä¸Šä¼ å›¾ç‰‡ï¼ˆæ‹–æ‹½å’Œç‚¹å‡»ï¼‰
- [ ] å¯ä»¥åˆ é™¤å•ä¸ªæˆ–å…¨éƒ¨æ–‡ä»¶
- [ ] JPG/PNG/WebP æ ¼å¼äº’è½¬
- [ ] HEIC è½¬ JPG
- [ ] è´¨é‡å‹ç¼©ï¼ˆæ»‘å—ï¼‰
- [ ] æŒ‰å¤§å°å‹ç¼©
- [ ] æ‰¹é‡å¤„ç†
- [ ] è¿›åº¦æ˜¾ç¤º
- [ ] æ‰¹é‡ä¸‹è½½ ZIP

### æ€§èƒ½æ£€æŸ¥

- [ ] æ‰“åŒ…ä½“ç§¯ <3MB
- [ ] å•å¼ å›¾ç‰‡å¤„ç† â‰¤2ç§’
- [ ] 50 å¼ æ‰¹é‡å¤„ç† â‰¤2åˆ†é’Ÿ
- [ ] Lighthouse åˆ†æ•° >90
- [ ] ç§»åŠ¨ç«¯æµç•…

### å…¼å®¹æ€§æ£€æŸ¥

- [ ] Chrome æ­£å¸¸
- [ ] Edge æ­£å¸¸
- [ ] Safari æ­£å¸¸
- [ ] å¾®ä¿¡æµè§ˆå™¨æ­£å¸¸
- [ ] iOS æ­£å¸¸
- [ ] Android æ­£å¸¸

### ç”¨æˆ·ä½“éªŒæ£€æŸ¥

- [ ] æ“ä½œæµç¨‹æ¸…æ™°
- [ ] é”™è¯¯æç¤ºå‹å¥½
- [ ] éšç§å£°æ˜æ˜¾ç¤º
- [ ] åŠ è½½çŠ¶æ€æµç•…
- [ ] å“åº”å¼å¸ƒå±€åˆç†

### ä»£ç è´¨é‡æ£€æŸ¥

- [ ] æ—  TypeScript é”™è¯¯
- [ ] æ—  ESLint è­¦å‘Š
- [ ] ä»£ç æ ¼å¼åŒ–ç»Ÿä¸€
- [ ] å…³é”®é€»è¾‘æœ‰æ³¨é‡Š
- [ ] Git æäº¤è§„èŒƒ

### æ–‡æ¡£æ£€æŸ¥

- [ ] README å®Œæ•´
- [ ] ç”¨æˆ·ä½¿ç”¨æŒ‡å—
- [ ] æŠ€æœ¯æ–‡æ¡£æ›´æ–°
- [ ] éšç§æ”¿ç­–

---

## æ€»ç»“

### å¼€å‘å‘¨æœŸ

- **MVP 1.0ï¼š** 8-10 å·¥ä½œæ—¥
- **Version 1.1ï¼š** +2 å‘¨
- **Version 1.2ï¼š** +4 å‘¨
- **Version 2.0ï¼š** +3 ä¸ªæœˆ

### èµ„æºéœ€æ±‚

- **å‰ç«¯å¼€å‘ï¼š** 1 äºº
- **UI/UX è®¾è®¡ï¼š** 0.5 äººï¼ˆå…¼èŒï¼‰
- **æµ‹è¯•ï¼š** 0.5 äººï¼ˆå…¼èŒï¼‰

### æˆåŠŸæ ‡å‡†

- [x] æŒ‰æ—¶äº¤ä»˜ MVP 1.0
- [x] æ ¸å¿ƒåŠŸèƒ½ç¨³å®šè¿è¡Œ
- [x] ç”¨æˆ·ä»»åŠ¡æ—¶é•¿ â‰¤2 åˆ†é’Ÿ
- [x] é¦–å‘¨ DAU â‰¥100
- [x] ç”¨æˆ·åé¦ˆç§¯æ

---

**æ–‡æ¡£åˆ›å»ºæ—¥æœŸï¼š** 2025-10-06
**ä¸‹æ¬¡æ›´æ–°æ—¥æœŸï¼š** å¼€å‘å®Œæˆå

**è´Ÿè´£äººï¼š** å¾…åˆ†é…
**å®¡æ ¸äººï¼š** å¾…å®š
