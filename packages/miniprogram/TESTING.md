# 轻图小程序测试指南

## 📋 测试总览

**测试版本**: Version 1.2.0
**测试平台**: 微信小程序（iOS & Android）
**测试类型**: 功能测试、性能测试、兼容性测试

---

## 🔧 测试环境准备

### 1. 微信开发者工具
- **版本要求**: ≥ Stable 1.06.2404020
- **基础库**: 3.5.5+
- **下载地址**: https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

### 2. 真机测试设备
#### iOS 设备
- iPhone 8 及以上（推荐 iPhone 11/12/13）
- iOS 14.0 及以上
- 微信版本 ≥ 8.0.0

#### Android 设备
- 主流品牌（华为、小米、OPPO、vivo、三星）
- Android 8.0 及以上
- 微信版本 ≥ 8.0.0

### 3. 测试图片素材
准备以下测试图片集：
- **标准图片**: 3-5张 JPG/PNG（500KB - 2MB）
- **大图**: 2-3张 5MB+ 图片
- **特殊格式**: HEIC 格式图片（iOS）
- **多格式混合**: JPG + PNG + WebP 组合
- **边界测试**: 超小图（<10KB）、超大图（>20MB）

---

## ✅ 功能测试清单

### 模块 1: 图片选择与上传
| 测试项 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 单张图片选择 | 点击"+"按钮 → 选择1张图片 | 正确显示预览，显示文件名和大小 | ⬜ |
| 批量图片选择 | 点击"+"按钮 → 选择9张图片 | 全部显示在网格中，排序正确 | ⬜ |
| 超出数量限制 | 尝试选择10张图片 | 显示提示"最多选择9张图片" | ⬜ |
| 大文件处理 | 选择15MB+的图片 | 正常加载预览，无卡顿 | ⬜ |
| 删除图片 | 点击预览右上角 × 按钮 | 图片从列表移除，网格重排 | ⬜ |
| 清空所有图片 | 点击"清空"按钮 | 所有图片清除，恢复初始状态 | ⬜ |

### 模块 2: 格式转换
| 测试项 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|------|
| JPG → PNG | 选择JPG图片 → 输出格式选PNG → 处理 | 正确转换为PNG格式 | ⬜ |
| PNG → JPG | 选择PNG图片 → 输出格式选JPG → 处理 | 正确转换为JPG格式 | ⬜ |
| 混合 → WebP | 选择JPG+PNG → 输出WebP → 处理 | 全部转换为WebP格式 | ⬜ |
| HEIC → JPG | 选择HEIC图片 → 输出JPG → 处理 | 正确转换（iOS测试） | ⬜ |
| 扩展名大小写 | 选择.jpg或.JPG选项 → 处理 | 输出文件扩展名符合选择 | ⬜ |

### 模块 3: 批量裁剪
| 测试项 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 1:1 正方形 | 启用裁剪 → 选择1:1 → 处理 | 输出正方形图片，居中裁剪 | ⬜ |
| 16:9 横屏 | 启用裁剪 → 选择16:9 → 处理 | 输出16:9比例图片 | ⬜ |
| 4:3 经典 | 启用裁剪 → 选择4:3 → 处理 | 输出4:3比例图片 | ⬜ |
| 9:16 竖屏 | 启用裁剪 → 选择9:16 → 处理 | 输出9:16比例图片（社交媒体） | ⬜ |
| 3:4 竖版 | 启用裁剪 → 选择3:4 → 处理 | 输出3:4比例图片 | ⬜ |
| 裁剪+转换 | 启用裁剪 → 选择比例 + 格式 → 处理 | 同时完成裁剪和格式转换 | ⬜ |

### 模块 4: 批量重命名
| 测试项 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 基础重命名 | 启用重命名 → 前缀"test" → 处理 | 文件名格式: test_001.jpg, test_002.jpg | ⬜ |
| 起始序号 | 前缀"pic"，起始序号10 → 处理 | 文件名格式: pic_010.jpg, pic_011.jpg | ⬜ |
| 序号位数 | 前缀"img"，序号位数5 → 处理 | 文件名格式: img_00001.jpg, img_00002.jpg | ⬜ |
| 空前缀 | 前缀留空 → 处理 | 文件名格式: _001.jpg（仅序号） | ⬜ |
| 中文前缀 | 前缀"照片" → 处理 | 文件名格式: 照片_001.jpg | ⬜ |
| 重命名预览 | 修改重命名参数 | 实时更新示例预览 | ⬜ |

### 模块 5: 质量压缩
| 测试项 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 质量压缩 | 压缩模式"按质量" → 质量50% → 处理 | 文件大小显著减小，画质可接受 | ⬜ |
| 高质量 | 质量设置90% → 处理 | 文件大小略减，画质接近原图 | ⬜ |
| 低质量 | 质量设置10% → 处理 | 文件大小大幅减小，画质明显降低 | ⬜ |
| 文件大小压缩 | 压缩模式"按大小" → 目标500KB → 处理 | 输出文件 ≤ 500KB | ⬜ |
| 大小压缩精度 | 目标200KB → 处理多张 | 每张文件接近200KB（±10%） | ⬜ |
| 压缩率显示 | 处理完成后查看压缩信息 | 显示原始大小、压缩后大小、压缩率 | ⬜ |

### 模块 6: 批量处理与保存
| 测试项 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 批量处理进度 | 选择9张图片 → 开始处理 | 显示进度条，实时更新当前进度 | ⬜ |
| 处理速度 | 处理9张2MB图片（转换+压缩） | ≤ 20秒完成 | ⬜ |
| 处理错误处理 | 处理包含损坏图片的批次 | 显示错误提示，其他图片正常处理 | ⬜ |
| 保存到相册权限 | 首次保存 → 点击"保存到相册" | 弹出授权提示，授权后保存成功 | ⬜ |
| 拒绝权限处理 | 拒绝相册权限 | 显示引导提示，说明如何开启权限 | ⬜ |
| 批量保存成功 | 授权后批量保存9张 | 显示保存进度，全部保存到相册 | ⬜ |
| 保存失败处理 | 相册空间不足场景 | 显示错误提示，已保存数量统计 | ⬜ |

### 模块 7: UI/UX 体验
| 测试项 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 深色模式 | 系统切换到深色模式 | 小程序自动切换深色主题，色彩协调 | ⬜ |
| 响应式布局 | 不同屏幕尺寸测试 | 布局自适应，无错位 | ⬜ |
| 按钮交互 | 点击所有按钮 | 点击反馈明显，无延迟 | ⬜ |
| 滑块操作 | 拖动质量滑块 | 滑动流畅，数值实时更新 | ⬜ |
| 下拉刷新 | 下拉页面 | 无刷新功能（符合预期，已禁用） | ⬜ |
| 加载状态 | 处理大批量图片 | 显示 loading 状态，无假死 | ⬜ |

---

## ⚡ 性能测试

### 测试场景 1: 标准批量处理
- **测试数据**: 9张图片（每张1-3MB）
- **操作**: JPG → WebP + 质量70% + 1:1裁剪
- **性能指标**:
  - 总处理时间: **≤ 15秒** ⬜
  - 内存占用: **≤ 150MB** ⬜
  - 无卡顿、无闪退 ⬜

### 测试场景 2: 大文件处理
- **测试数据**: 5张图片（每张10-15MB）
- **操作**: PNG → JPG + 按大小压缩500KB
- **性能指标**:
  - 总处理时间: **≤ 30秒** ⬜
  - 内存占用: **≤ 200MB** ⬜
  - 无崩溃 ⬜

### 测试场景 3: 快速连续操作
- **操作步骤**:
  1. 选择9张图片
  2. 立即点击处理
  3. 处理完成后立即保存
  4. 清空后再次选择9张
- **性能指标**:
  - 操作响应流畅 ⬜
  - 无内存泄漏 ⬜

---

## 🔄 兼容性测试

### iOS 设备矩阵
| 设备型号 | 系统版本 | 微信版本 | 测试状态 |
|----------|----------|----------|----------|
| iPhone 15 Pro | iOS 17 | 8.0.49+ | ⬜ |
| iPhone 13 | iOS 16 | 8.0.40+ | ⬜ |
| iPhone 11 | iOS 15 | 8.0.30+ | ⬜ |
| iPhone 8 | iOS 14 | 8.0.20+ | ⬜ |

### Android 设备矩阵
| 设备品牌 | 系统版本 | 微信版本 | 测试状态 |
|----------|----------|----------|----------|
| 华为 Mate 50 | HarmonyOS 4 | 8.0.49+ | ⬜ |
| 小米 13 | MIUI 14 (Android 13) | 8.0.40+ | ⬜ |
| OPPO Find X5 | ColorOS 13 (Android 13) | 8.0.40+ | ⬜ |
| vivo X90 | OriginOS 3 (Android 13) | 8.0.40+ | ⬜ |
| 三星 S23 | One UI 5 (Android 13) | 8.0.40+ | ⬜ |

### 特殊场景测试
| 测试场景 | 测试步骤 | 预期结果 | 状态 |
|----------|----------|----------|------|
| 弱网环境 | 切换到 3G/2G 网络 | 本地处理不受影响，仅首次加载慢 | ⬜ |
| 离线环境 | 开启飞行模式 | 核心功能正常（仅分享功能受限） | ⬜ |
| 后台切换 | 处理中切换到其他App | 返回后继续处理或显示中断提示 | ⬜ |
| 锁屏场景 | 处理中锁屏 | 解锁后恢复处理或显示超时提示 | ⬜ |
| 低电量模式 | 电量<20% 开启省电模式 | 功能正常，性能可接受 | ⬜ |

---

## 🐛 缺陷报告模板

```markdown
### 缺陷标题
[简短描述问题]

### 缺陷等级
- [ ] P0 - 致命（阻塞核心功能）
- [ ] P1 - 严重（影响主要功能）
- [ ] P2 - 一般（影响次要功能）
- [ ] P3 - 轻微（UI/UX小问题）

### 复现步骤
1.
2.
3.

### 预期结果
[应该发生什么]

### 实际结果
[实际发生了什么]

### 测试环境
- 设备: [iPhone 13 / 小米 13]
- 系统: [iOS 16 / Android 13]
- 微信版本: [8.0.40]
- 小程序版本: [1.2.0]

### 截图/录屏
[附加截图或录屏链接]

### 其他信息
[附加说明]
```

---

## 📊 测试报告模板

### 测试总结
- **测试日期**: YYYY-MM-DD
- **测试人员**: [姓名]
- **测试版本**: 1.2.0
- **测试用例总数**: 50+
- **通过数量**:
- **失败数量**:
- **阻塞数量**:
- **通过率**: %

### 主要发现
#### 严重问题
1.

#### 一般问题
1.

#### 优化建议
1.

### 性能数据
| 测试场景 | 目标 | 实际 | 结果 |
|----------|------|------|------|
| 标准批量处理（9张） | ≤15s | | |
| 大文件处理（5张10MB） | ≤30s | | |
| 内存占用 | ≤200MB | | |

### 兼容性总结
- iOS 设备: __ / __ 通过
- Android 设备: __ / __ 通过

### 结论
- [ ] 通过测试，建议发布
- [ ] 需要修复后重新测试
- [ ] 不通过，需要重大修改

---

## 📝 测试注意事项

1. **真机测试优先**: 开发者工具仅用于初步验证，核心功能必须真机测试
2. **覆盖主流设备**: iOS 和 Android 各至少测试 3 款主流设备
3. **记录详细日志**: 使用微信开发者工具的调试面板查看 console 日志
4. **性能监控**: 关注内存占用、处理速度、电量消耗
5. **用户体验**: 关注操作流畅度、反馈及时性、错误提示友好性
6. **边界条件**: 特别注意极端情况（超大文件、网络异常、权限拒绝等）

---

## 🚀 测试执行流程

### 阶段 1: 开发者工具测试（1天）
1. 执行所有功能测试用例
2. 验证基础性能指标
3. 修复明显问题

### 阶段 2: 真机测试（2-3天）
1. iOS 设备测试（至少3款）
2. Android 设备测试（至少4款）
3. 执行完整测试矩阵
4. 记录所有问题

### 阶段 3: 回归测试（1天）
1. 修复阶段2发现的问题
2. 重新测试受影响功能
3. 确认所有 P0/P1 问题已解决

### 阶段 4: 验收测试（半天）
1. 产品经理验收核心功能
2. 确认用户体验符合预期
3. 批准提交微信审核

---

## ✅ 测试完成检查清单

在提交微信审核前，确保：

- [ ] 所有 P0（致命）问题已修复
- [ ] 所有 P1（严重）问题已修复
- [ ] 至少 3 款 iOS 设备测试通过
- [ ] 至少 4 款 Android 设备测试通过
- [ ] 性能指标全部达标
- [ ] 无内存泄漏、无闪退
- [ ] 用户隐私政策已添加
- [ ] 相册权限说明清晰
- [ ] 深色模式显示正常
- [ ] 所有文案无错别字
- [ ] 版本号已更新（1.2.0）
- [ ] 提交审核材料已准备

---

**祝测试顺利！** 🎉
